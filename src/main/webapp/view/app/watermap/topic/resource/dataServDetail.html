<style>
.data-service-list ul li {
	list-style-type: none;
	margin: 0px;
	font-size: 14px;
	text-align: left;
}

.data-service-list li {
	margin-left: 10px;
	height: 30px;
	line-height: 30px;
	border-bottom: 1px dotted #dddddd;
}

.data-service-table td {
	height: 30px;
	line-height: 30px;
	text-align: left;
}
</style>
<div class="servdetail-container" data-bind="dataServDetailInitHandler">
	<div class="res-detail-back">
		<a href="#" data-bind="click:$root.clickReturnBtn">返回</a>
	</div>
	<div class="res-detail-clearfix" style="text-align: left;">
		<div class="res-detail-img-msg">
			<img data-bind="attr:{ src : 'style/asip/common/css/images/data.jpeg' }" height="100%" />
		</div>
		<div class="res-detail-nr-msg">
			<dl>
				<dt>
					<span data-bind="text : $root.dataResource().serviceName"></span>
				</dt>
				<dd style="height:90px">
					<span data-bind="text: $root.dataResource().description"></span>

					<span style="margin-top:10px; display:block" data-bind="text: '所属目录:&nbsp;' + $root.dataResource().dataDirFullname"></span>
				</dd>
				<dd class="res-detail-user-f">
					<i></i>
					<span data-bind="text:'发布人:&nbsp;' + ($root.dataResource().publishMan || '超级管理员')"></span>
					<span style="margin-left: 20px;">
						<em data-bind="text:'发布时间:&nbsp;' + ($root.dataResource().publishTime || '')"></em>
					</span>
				</dd>
			</dl>
		</div>
	</div>
	<div class="res-detail-msg">
		<ul class="res-detail-nav-tab res-detail-clearfix">
			<li data-bind="css:{ 'res-detail-hover': $root.selectedPanelIdx() == 1 }"><a href="#" data-bind="click:function(){ $root.clickPanelBtn(1) }">数据内容</a></li>
			<li data-bind="visible: $root._$_param['instanceId'], css:{ 'res-detail-hover': $root.selectedPanelIdx() == 2 }"><a href="#" data-bind="click:function(){ $root.clickPanelBtn(2) }">服务信息</a></li>
			<li data-bind="visible: $root._$_param['instanceId'], css:{ 'res-detail-hover': $root.selectedPanelIdx() == 3 }"><a href="#" data-bind="click:function(){ $root.clickPanelBtn(3) }">申请电子材料</a></li>
			<li>
				<a href="#" data-bind="click:function() { $root.clickPanelBtn(4) }" style="background-color: #449d44; color: #FFFFFF;">数据预览</a>
			</li>
		</ul>

		<div class="res-detail-bmain" data-bind="visible: $root.selectedPanelIdx() == 1 ">
			<div class="panel panel-default">
				<div class="panel-heading">接口基本信息</div>
				<div class="panel-body data-service-list">
					<ul>
						<li>
							接口地址：<!--ko text: $root.dataResource().uri --><!--/ko-->
						</li>
						<li>
							返回格式：json
						</li>
						<li>
							请求方式：get/post
						</li>
						<li>
							请求示例：<!--ko text: $root.dataResource().uri2 --><!--/ko-->
						</li>
						<li style="border:none">
							返回结果及说明：
						</li>
					</ul>
				</div>
				<div style="margin:0px 15px 15px 15px; text-align:left;">
					<pre style="margin:0px; min-height:320px; "><!--ko text: $root.dataResource().remarks --><!--/ko--></pre>
				</div>
			</div>


			<div class="panel panel-default">
				<div class="panel-heading">请求参数说明</div>
				<div class="panel-body data-service-table" style="min-height:100px">

					<table class="table">
						<thead>
						<tr style="border-bottom:1px solid #dddddd">
							<td style="width:50px">
								#
							</td>
							<td style="width:150px">
								参数
							</td>
							<td style="width:150px">
								类型
							</td>
							<td style="width:50px">
								必传
							</td>
							<td>
								描述
							</td>
						</tr>
						</thead>
						<tbody data-bind="foreach:{ data:$root.dataResource().inputParams, as:'p' } ">
						<tr>
							<td data-bind="text:$index()+1">  </td>
							<td data-bind="text:p.paramName">  </td>
							<td data-bind="text:p.dataType">  </td>
							<td data-bind="text:p.need">  </td>
							<td data-bind="text:p.desc">  </td>
						</tr>
						</tbody>
					</table>
					<div data-bind="visible:(!$root.dataResource().intputParams || $root.dataResource().intputParams.length == 0)">没有定义请求参数</div>
				</div>
			</div>


			<div class="panel panel-default">
				<div class="panel-heading">返回参数说明</div>
				<div class="panel-body data-service-table" style="min-height:100px">

					<table class="table">
						<thead>
						<tr style="border-bottom:1px solid #dddddd">
							<td style="width:50px">
								#
							</td>
							<td style="width:150px">
								字段
							</td>
							<td style="width:150px">
								类型
							</td>
							<td>
								描述
							</td>
						</tr>
						</thead>
						<tbody data-bind="foreach:{ data:$root.dataResource().outputParams, as:'p' } ">
						<tr>
							<td data-bind="text:$index()+1"> </td>
							<td data-bind="text:p.field"> </td>
							<td data-bind="text:p.dataType"> </td>
							<td data-bind="text:p.desc"> </td>
						</tr>
						</tbody>
					</table>
					<div data-bind="visible:(!$root.dataResource().outputParams || $root.dataResource().outputParams.length == 0)">没有返回参数</div>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading">错误码参照</div>
				<div class="panel-body data-service-table">

					<table class="table">
						<thead>
						<tr style="border-bottom:1px solid #dddddd">
							<td style="width:50px">
								#
							</td>
							<td style="width:150px">
								错误码
							</td>
							<td>
								说明
							</td>
						</tr>
						</thead>
						<tbody>
						<tr>
							<td> 1 </td>
							<td> 0000 </td>
							<td> 执行成功 </td>
						</tr>
						<tr>
							<td> 2 </td>
							<td> 0001 </td>
							<td> 找不到服务 </td>
						</tr>
						<tr>
							<td> 3 </td>
							<td> 0002 </td>
							<td> 参数错误</td>
						</tr>
						<tr>
							<td> 4 </td>
							<td> 0003 </td>
							<td> 查询异常 </td>
						</tr>
						<tr>
							<td> 5 </td>
							<td> 0004 </td>
							<td> 没有访问权限 </td>
						</tr>
						<tr>
							<td> 6 </td>
							<td> 0009 </td>
							<td> 系统内部异常，请联系管理员 </td>
						</tr>
						</tbody>
					</table>

				</div>
			</div>
		</div>

		<div class="res-detail-bmain" data-bind="visible: $root.selectedPanelIdx() == 2 ">
			<table class="table">
				<tr>
					<th width="10%">申请人</th>
					<th width="60%">数据用途</th>
					<th>申请时间</th>
					<th width="10%">状态</th>
				</tr>
				<tbody data-bind="foreach: {data:applyTaskHists, as:'applyTaskHist'}" style="text-align: left;">
				<td data-bind="text: applyTaskHist.assigneeName"></td>
				<td data-bind="text: applyTaskHist.handleComments"></td>
				<td data-bind="text: applyTaskHist.endTime || applyTaskHist.startTime"></td>
				<td data-bind="text: applyTaskHist.activityStatusName"></td>
				</tbody>
			</table>

			<table class="table">
				<tr>
					<th width="10%">审批人</th>
					<th width="60%">审批意见</th>
					<th>审批时间</th>
					<th width="10%">状态</th>
				</tr>
				<tbody style="text-align: left;" data-bind="foreach: {data:approvalTaskHists, as:'approvalTaskHist'}">
				<tr>
					<td data-bind="text: approvalTaskHist.assigneeName"></td>
					<td data-bind="text: approvalTaskHist.handleComments"></td>
					<td data-bind="text: approvalTaskHist.endTime || approvalTaskHist.startTime"></td>
					<td data-bind="text: approvalTaskHist.activityStatusName"></td>
				</tr>
				</tbody>
			</table>

			<div style="text-align: left;" data-bind="visible: $root.dataResource().token">服务地址: &nbsp;
				<a style="color: red;" data-bind="attr: { href: $root.dataResource().uri2 + ($root.dataResource().token || '') }, text: $root.dataResource().uri2 + ($root.dataResource().token || '')" target="_blank"></a>
			</div>

		</div>

		<!-- 展示申请审批材料信息 -->
		<div id="d-map-serv-apply-doc-container" class="res-detail-bmain" data-bind="visible: $root.selectedPanelIdx() == 3">

		</div>

		<div class="res-detail-bmain" data-bind="visible: $root.selectedPanelIdx() == 4 ">
			<table class="table">
				<thead>
				<tr style="border-bottom:1px solid #dddddd">
					<td style="width:50px">
						#
					</td>
					<td style="width:80px">
						参数
					</td>
					<td style="width:80px">
						值
					</td>
					<td style="width:150px">
						类型
					</td>
					<td style="width:50px">
						必传
					</td>
					<td>
						描述
					</td>
				</tr>
				</thead>
				<tbody data-bind="foreach:{ data:$root.dataResource().inputParams, as:'p' } ">
				<tr>
					<td data-bind="text:$index()+1"> </td>
					<td data-bind="text:p.paramName"> </td>
					<td> <input type="text" style="width:150px" /> </td>
					<td data-bind="text:p.dataType"> </td>
					<td data-bind="text:p.need">  </td>
					<td data-bind="text:p.desc">  </td>
				</tr>
				</tbody>
			</table>
			<div style="text-align:right">
				<button type="button" class=" btn-small btn-primary " data-bind="click:$root.serviceTest">执行接口</button>
			</div>
		</div>
	</div>
</div>