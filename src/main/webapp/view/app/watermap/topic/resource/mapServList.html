<div class="servlist-container" data-bind="mapServListInitHandler">
	<div class="res_content_subtitle">
		<!-- 搜索框查询 -->
		<div class="input-group" style="float:left;">
			<input type="text" class="form-control" placeholder="服务名称，描述" style="margin-top:3px;width:345px;" data-bind="textInput:$root.searchText, valueUpdate:'afterkeydown', event: {keypress: onSearchEnter}" maxlength="50">
			<span>
	            <button class="btn btn-primary" type="button" data-bind="click:$root.onSearchClick">搜索</button>
	        </span>
		</div>

		<div style="float: right; display:inline-block;">
			<div class="btn-group">
				<a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
					<span data-bind="text: $root.selectedApplyStatus().name()">全&nbsp;&nbsp;部</span>
					<span class="caret"></span>
				</a>
				<ul class="dropdown-menu" style="min-width: 100px;">
					<!--ko foreach: {data:$root.applyStatusItems, as:'applyStatusItem'}-->
					<li>
						<a href="#" data-bind="click: function() { $root.clickApplyStatus($index(), applyStatusItem); }">
							<font data-bind="text: applyStatusItem"></font>
							<span style="color: red;" data-bind="if: $root.selectedApplyStatus().value() === $index()">&radic;</span>
						</a>
					</li>
					<!--/ko-->
				</ul>
			</div>
			<div class="btn-group">
				<a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
					<span data-bind="text: $root.selectedCoordinate().name()">全&nbsp;&nbsp;部</span>
					<span class="caret"></span>
				</a>
				<ul class="dropdown-menu" style="min-width: 100px;">
					<!--ko foreach: {data:$root.coordinateItems, as:'coordinateItem'}-->
					<li>
						<a href="#" data-bind="click: function() { $root.clickCoordinate($index(), coordinateItem.name(), coordinateItem.value()); }">
							<font data-bind="text: coordinateItem.name"></font>
							<span style="color: red;" data-bind="if: $root.selectedCoordinate().index() === $index()">&radic;</span>
						</a>
					</li>
					<!--/ko-->
				</ul>
			</div>
			<div class="btn-group">
				<a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
					<span data-bind="text: $root.selectedSortType().name()"></span>
					<span class="caret"></span>
				</a>
				<ul class="dropdown-menu" style="min-width: 100px;">
					<!--ko foreach: {data:$root.sortTypeItems, as:'sortTypeItem'}-->
					<li>
						<a href="#" data-bind="click: function() { $root.clickSortType($index(), sortTypeItem); }">
							<font data-bind="text: sortTypeItem"></font>
							<span style="color: red;" data-bind="if: $root.selectedSortType().value() === $index()">&radic;</span>
						</a>
					</li>
					<!--/ko-->
				</ul>
			</div>
			<div class="btn-group">
				<a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
					<span data-bind="html: $root.selectedViewType().name()">查看方式</span>
					<span class="caret"></span>
				</a>
				<ul class="dropdown-menu" style="min-width: 100px;">
					<!--ko foreach: {data:$root.viewTypeItems, as:'viewTypeItem'}-->
					<li>
						<a href="#" data-bind="click: function() { $root.clickViewType($index(), viewTypeItem); }">
							<font data-bind="text: viewTypeItem"></font>
							<span style="color: red;" data-bind="if: $root.selectedViewType().value() === $index()">&radic;</span>
						</a>
					</li>
					<!--/ko-->
				</ul>
			</div>
		</div>
	</div>

	<div style="clear:both; text-align: left; overflow: auto;" data-bind="text:searchStr4Tip"></div>

	<!-- 网格显示方式 -->
	<div class="row res_content_content tabgalleryTop" data-bind="visible: $root.selectedViewType().name() === '网格方式', foreach: {data:layers, as:'layer'}">
		<div class="col-sm-6 col-md-4 col-xs-12 col-lg-4" data-bind="event:{mouseover:$root.onMouseover, mouseout:$root.onMouseout}">
			<div class="thumbnail">
				<div data-bind="click: $root.clickShowLayerDetail" style="background-color: #FFFFFF">
					<img class="img-responsive" data-holder-rendered="true" data-bind="attr:{ src:layer.img }">
					<div class="caption" data-bind="css: {'servlist-audited': layer.status == '1', 'servlist-applying': layer.status == '3', 'servlist-isAuditing': (layer.status != null && layer.status != '' && layer.status == '4')}">
						<div class="author-info">
							<div class="res-thumbnail-lview" data-bind="text:layer.newNameCn"></div>
						</div>
						<div style="float: none; clear: both;" data-bind="text:'来源：&nbsp;' + layer.data.dataSource"></div>
						<div data-bind="text:'坐标系：&nbsp;' + layer.data.coordinateSystem"></div>
						<div class="thumbnail-description res-subtitle" data-bind="text:layer.description; attr:{ title:layer.description }"></div>
					</div>
				</div>
				<div class="res-bottom-panel">
					<ul class="res-bottom-bar">
						<!-- ko if: !layer.status || layer.status == 0  -->
						<li>
							<a href="#" data-bind="click: $root.openMapResApplyPanal">申请</a>
						</li>
						<li>
							<a href="#" data-bind="click: $root.addToApplyCart">添加至申请列表</a>
						</li>
						<!-- /ko -->
						<!-- ko if: layer.status == 3 -->
						<li>
							<a href="#" data-bind="click: $root.uploadApplyDoc">上传申请材料</a>
						</li>
						<li>
							<a href="#" data-bind="click: $root.download">下载服务申请文档</a>
						</li>
						<!-- /ko -->
						<!-- ko if: layer.status == 4 -->
						<li>
							<a href="#" data-bind="click: $root.clickShowLayerDetail">查看申请进程</a>
						</li>
						<!-- /ko -->
						<!-- ko if: layer.status == 5  -->
						<li>
							<a href="#" data-bind="click: $root.openMapResApplyPanal">重新申请</a>
						</li>
						<li>
							<a href="#" data-bind="click: $root.addToApplyCart">添加至申请列表</a>
						</li>
						<!-- /ko -->
					</ul>
				</div>
			</div>
		</div>
	</div>

	<!-- 列表显示方式 -->
	<div class="row res_content_content tabgalleryTop" style="padding: 0 15px 15px 15px;" data-bind="visible: $root.selectedViewType().name() === '列表方式', foreach: {data:layers, as:'layer'}">
		<div class="col-sm-12 col-md-12 col-xs-12 col-lg-12" style="margin-bottom: 15px;" data-bind="event:{mouseover:$root.onMouseover, mouseout:$root.onMouseout}">
			<div class="row" style="height: 180px;">
				<div class="thumbnail" data-bind="click: $root.clickShowLayerDetail">
					<div class="col-md-4 col-xs-4 col-lg-4" style="padding: 0;">
						<img height="180px" width="100%" data-bind="attr:{ src:layer.img }">
					</div>
					<div class="col-md-8 col-xs-8 col-lg-8" style="border-left: 1px solid #ddd; height: 180px; position: relative;" data-bind="attr:{ href:layer.url }">
						<a data-bind="attr:{ href:layer.url }" style="display: block; padding: 12px; background-color: #fff;">
							<table width="100%" data-bind="css: {'servlist-audited': layer.status == '1', 'servlist-applying': layer.status == '3', 'servlist-isAuditing': (layer.status != null && layer.status != '' && layer.status != '4')}">
								<tbody>
									<tr>
										<td colspan="2"><div class="res-thumbnail-lview" style="text-align: left;" data-bind="text:layer.newNameCn"></div></td>
									</tr>
									<tr>
										<td colspan="2"><div class="res-thumbnail-lview" style="text-align: left;" data-bind="text:'来源：&nbsp;' + layer.data.dataSource"></div></td>
									</tr>
									<tr>
										<td colspan="2"><div data-bind="text:'坐标系：&nbsp;' + layer.data.coordinateSystem" style="text-align: left;"></div></td>
									</tr>
									<tr>
										<td colspan="2"><div data-bind="text:'描述:&nbsp;' + layer.description" style="text-align: left;"></div></td>
									</tr>
								</tbody>
							</table>
						</a>
						<div class="res-bottom-panel" style="position: absolute; width: 100%; bottom: 0; left: 0;">
							<ul class="res-bottom-bar">
								<!-- ko if: !layer.status || layer.status == 0  -->
								<li>
									<a href="#" data-bind="click: $root.openMapResApplyPanal">申请</a>
								</li>
								<li>
									<a href="#" data-bind="click: $root.addToApplyCart">添加至申请列表</a>
								</li>
								<!-- /ko -->
								<!-- ko if: layer.status == 3 -->
								<li>
									<a href="#" data-bind="click: $root.uploadApplyDoc">上传申请材料</a>
								</li>
								<li>
									<a href="#" data-bind="click: $root.download">下载服务申请文档</a>
								</li>
								<!-- /ko -->
								<!-- ko if: layer.status == 4 -->
								<li>
									<a href="#" data-bind="click: $root.clickShowLayerDetail">查看申请进程</a>
								</li>
								<!-- /ko -->
								<!-- ko if: layer.status == 5  -->
								<li>
									<a href="#" data-bind="click: $root.openMapResApplyPanal">重新申请</a>
								</li>
								<li>
									<a href="#" data-bind="click: $root.addToApplyCart">添加至申请列表</a>
								</li>
								<!-- /ko -->
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- 分页模块 -->
	<div style="float: right;">
		<ul class="pagination">
			<li><a href="#" data-bind="click:function(){ $root.onPageClick(1); }">首页</a></li>
			<!--ko foreach: {data:$root.pageBar, as:'pb'}-->
			<li data-bind="css:{ 'active': pb == $root.pageNum() }"><a href="#" data-bind="click:function(){ $root.onPageClick(pb); }, text:pb"></a></li>
			<!--/ko-->
			<li><a href="#" data-bind="click:function(){ $root.onPageClick($root.lastPageNum()); }">最后一页</a></li>
		</ul>
	</div>
</div>