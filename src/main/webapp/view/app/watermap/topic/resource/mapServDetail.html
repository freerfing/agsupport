<div class="servdetail-container" data-bind="mapServDetailInitHandler">
	<div class="res-detail-back">
		<a href="#" data-bind="click:$root.clickReturnBtn">返回</a>
	</div>
	<div class="res-detail-clearfix" style="text-align: left;">
		<div class="res-detail-img-msg">
			<img data-bind="attr:{ src : $root.layer().picture() }" height="100%" />
		</div>
		<div class="res-detail-nr-msg">
		  <dl>
			<dt>
				<span data-bind="text : $root.layer().name()"></span>
			</dt>
			<dd class="res-detail-desc" data-bind="text : $root.layer().illustration() || '无描述'"></dd>
			<dd>
				<span data-bind="text: '数据来源:&nbsp;' + ($root.layer().dataSource() || '')"></span>
				<span style="margin-left: 20px;" data-bind="text: '坐标系:&nbsp;' + ($root.layer().coordinateSystem() || '')"></span>
				<span style="margin-left: 20px;" data-bind="text: '数据版本:&nbsp;' + ($root.layer().dataVersion() || '最新')"></span>
			</dd>
			<dd class="res-detail-user-f">
				<i></i>
				<span data-bind="text:'发布人:&nbsp;' + $root.layer().owner()"></span>
				<span style="margin-left: 20px;">
					<em data-bind="text:'发布时间:&nbsp;' + $root.layer().pubDate()"></em>
				</span>
			</dd>
		  </dl>
		</div>
	</div>
	<div class="res-detail-msg">
		<!-- 地图内容、服务信息、申请电子材料、服务预览TAB页签 -->
		<ul class="res-detail-nav-tab res-detail-clearfix">
		  <li data-bind="css:{ 'res-detail-hover': $root.selectedPanelIdx() == 1 }"><a href="#" data-bind="click:function(){ $root.clickPanelBtn(1) }">地图内容</a></li>
		  <li data-bind="visible: $root._$_param['instanceId'], css:{ 'res-detail-hover': $root.selectedPanelIdx() == 2 }"><a href="#" data-bind="click:function(){ $root.clickPanelBtn(2) }">服务信息</a></li>
		  <li data-bind="visible: $root._$_param['instanceId'], css:{ 'res-detail-hover': $root.selectedPanelIdx() == 3 }"><a href="#" data-bind="click:function(){ $root.clickPanelBtn(3) }">申请电子材料</a></li>
		  <li data-bind="visible: $root.layer().proxyUrl() " >
			  <a href="#" data-bind="click:function(){ window.open($root.layer().proxyUrl() + '?f=jsapi'); }" style="background-color: #449d44; color: #FFFFFF;">服务预览</a>
		  </li>
		</ul>

		<div class="res-detail-bmain" data-bind="visible: $root.selectedPanelIdx() == 1 ">
		  <table class="table" >
			<tbody data-bind="foreach: layerAttrs">
				<tr>
					<td data-bind="text : key" style="text-align: left;  width: 120px"></td>
					<td data-bind="text : value" style="text-align: left;"></td>
				</tr>
			</tbody>
		  </table>
		</div>

		<div class="res-detail-bmain" data-bind="visible: $root.selectedPanelIdx() == 2 ">
			<table class="table">
				<tr>
					<th width="10%">申请人</th>
					<th width="60%">数据用途</th>
					<th>申请时间</th>
					<th width="10%">状态</th>
				</tr>
				<tbody data-bind="foreach: {data:applyTaskHists, as:'applyTaskHist'}" style="text-align: left;">
					<td data-bind="text: applyTaskHist.assigneeName"></td>
					<td data-bind="text: applyTaskHist.handleComments"></td>
					<td data-bind="text: applyTaskHist.endTime || applyTaskHist.startTime"></td>
					<td data-bind="text: applyTaskHist.activityStatusName"></td>
				</tbody>
			</table>

			<table class="table">
				<tr>
					<th width="10%">审批人</th>
					<th width="60%">审批意见</th>
					<th>审批时间</th>
					<th width="10%">状态</th>
				</tr>
				<tbody style="text-align: left;" data-bind="foreach: {data:approvalTaskHists, as:'approvalTaskHist'}">
					<tr>
						<td data-bind="text: approvalTaskHist.assigneeName"></td>
						<td data-bind="text: approvalTaskHist.handleComments"></td>
						<td data-bind="text: approvalTaskHist.endTime || approvalTaskHist.startTime"></td>
						<td data-bind="text: approvalTaskHist.activityStatusName"></td>
					</tr>
				</tbody>
			</table>

			<div style="text-align: left;" data-bind="visible: $root.layer().proxyUrl()">服务地址: &nbsp;
				<a style="color: red;" data-bind="attr: {href: $root.layer().proxyUrl()}, text: $root.layer().proxyUrl()" target="_blank"></a>
			</div>

		</div>

		<!-- 展示申请审批材料信息 -->
		<div id="d-map-serv-apply-doc-container" class="res-detail-bmain" data-bind="visible: $root.selectedPanelIdx() == 3">

		</div>
	</div>
</div>