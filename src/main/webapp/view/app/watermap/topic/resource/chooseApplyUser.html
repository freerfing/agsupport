<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>广州水务一体化平台</title>
    <link rel="stylesheet" href="/awater/lib/3rdparty/bootstrap/css/bootstrap.css" />
	<link href="/awater/lib/3rdparty/jquery-easyui/themes/gray/easyui.css" rel="stylesheet" type="text/css"/>
    <link href="/awater/lib/3rdparty/jquery-easyui/themes/icon.css" rel="stylesheet" type="text/css"/>
    <script src="/awater/lib/3rdparty/jquery-easyui/jquery.min.js" type="text/javascript"></script>
	<script src="/awater/lib/3rdparty/jquery-easyui/jquery.easyui.min.js" type="text/javascript"></script>
    <script src="/awater/lib/3rdparty/jquery-easyui/locale/easyui-lang-zh_CN.js" type="text/javascript"></script>
    <script src="/awater/lib/3rdparty/jquery-easyui/jquery.easyui.search.js" type="text/javascript"></script>
    <script src="/awater/view/catalog/agcom/frame/js-lib/jquery-easyui-ext/jquery.json.js" type="text/javascript"></script>
    <script src="/awater/view/catalog/agcom/frame/js-tool/common.js" type="text/javascript"></script>
    <script src="/awater/view/catalog/agcom/frame/js-tool/datagrid.js" type="text/javascript"></script>
    <script src="/awater/view/catalog/agcom/frame/js-tool/datagridExt.js" type="text/javascript"></script>
    <script src="chooseApplyUser.js" type="text/javascript"></script>
	<script>
		top.agsupportUrl = 'http://127.0.0.1/agsupport';
		function formatCellTooltip(value) {
			return "<span title='" + value + "'>" + value + "</span>";
		}

		function formatDepartmentAndCellTooltip(value) {
			if (value != null) {
				if (value.substr(0,2)=='//')
					value = value.substr(2);
			}
			return "<span title='" + value + "'>" + value + "</span>";
		}

		function formatYESorNO(value) {
			if (value == '0') {
				return "<span style=\"color:red\">否</span>";
			} else if (value == '1') {
				return "<span style=\"color:green\">是</span>";
			}
		}

		function dispUserList() {
			var selected = $('#org_tree').tree('getSelected');
			if (selected==null) {
				var nodes = $('#org_tree').tree('getRoots');
				if (nodes.length != 0) {
					$('#org_tree').tree('select', nodes[0].target);
					selected = $('#org_tree').tree('getSelected');
				}
			}

			window.open('${ctx}/swuser/dispAllUserlist/' + selected.id);
		}

		$.extend($.fn.tree.methods, {   //tree扩展方法  获取某个节点的一级子节点
			getLeafChildren: function (jq, params) {
				var nodes = [];
				$(params).next().children().children("div.tree-node").each(function () {
					nodes.push($(jq[0]).tree('getNode', this));
				});
				return nodes;
			}
		});
	</script>
</head>
<body>
	<div class="easyui-layout" data-options="fit:true">
		<div data-options="region:'west',split:true" title="机构" style="width:20%;">
			<table>
				<tr>
					<td style="padding-left: 0px" align="center" width="600">
						<div style="float: left">
							<a href="#" class="easyui-linkbutton" data-options="plain:false"
							   onclick="javascript:$('#org_tree').tree('collapseAll')">全部折叠</a>
							<a href="#" class="easyui-linkbutton" data-options="plain:false"
							   onclick="javascript:$('#org_tree').tree('expandAll')">全部展开</a>
						</div>
					</td>
				</tr>
			</table>
			<ul id="org_tree" class="easyui-tree" data-options="animate:true"></ul>
		</div>
		<div data-options="region:'center',border:false" style="width:auto">
			<div class="easyui-layout" data-options="fit:true">
				<div data-options="region:'north',collapsible:false" title="用户管理" style="overflow-y:hidden;">
					<div style="margin: 10px;width:auto;height: 60px;">
						<form id="form_user" method="post">
							<table>
								<tr>
									<td style="padding-right: 10px">
										<input id="userNameSearch" class="easyui-textbox" label="用户姓名："
											   labelWidth="85%" data-options="width:230" type="text"
											   name="userName"/>
									</td>
									<td style="padding-right: 10px" align="right" width="37%">
										<div style="float: left;margin-right: 3px;">
											<a href="#" class="easyui-linkbutton" iconCls="icon-search"
											   onclick="queryUser({start:1})">查询</a>
										</div>
										<div style="float: left;">
											<a href="#" class="easyui-linkbutton" iconCls="icon-undo"
											   onclick="clean_form('form_user');">清空</a>
										</div>
									</td>
								</tr>
							</table>
						</form>
					</div>
				</div>
				<div data-options="region:'center', border:false">
					<table id="dg_user" class="easyui-datagrid" style="width:auto;height:auto"
						   data-options="singleSelect:false,rownumbers:true,pagination:true,remoteSort:false,fit:true">
						<thead>
						<tr>
							<th data-options="field:'id', hidden:true">ID</th>
							<th data-options="field:'userName',width:'15%',align:'left',formatter:formatCellTooltip">
								姓名
							</th>
							<th data-options="field:'identitynum',width:'20%',align:'left',formatter:formatCellTooltip">
								职务
							</th>

							<th data-options="field:'officeTel',width:'15%',align:'left',formatter:formatCellTooltip">
								电话
							</th>
							<th data-options="field:'fax',width:'15%',align:'left',formatter:formatCellTooltip">
								分机
							</th>
							<th data-options="field:'mobile',width:'20%',align:'left',formatter:formatCellTooltip">
								手机
							</th>
							<th data-options="field:'orgPath',width:'20%',align:'left',formatter:formatDepartmentAndCellTooltip">
								所在部门
							</th>
							<th data-options="field:'memo1',width:'12%',align:'left',formatter:formatCellTooltip">
								备注
							</th>
						</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
