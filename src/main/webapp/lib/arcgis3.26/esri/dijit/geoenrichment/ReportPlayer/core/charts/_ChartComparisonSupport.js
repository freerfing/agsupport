// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.26/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartComparisonSupport","dojo/_base/declare ../comparison/ComparisonSelect ../comparison/ComparisonUtil ./utils/ChartTypes ../../dataProvider/supportClasses/ge/LocalGEChart ./dummyData/DummyGE esri/dijit/geoenrichment/utils/DomUtil dojo/i18n!esri/nls/jsapi".split(" "),function(g,h,k,f,l,m,d,b){b=b.geoenrichment.dijit.ReportPlayer.ChartContainer;return g(null,{comparisonSelect:null,_comparisonValue:null,_additionalFeaturesCache:null,_ge:null,
_initChartComparisonSelect:function(){var a=this;this._additionalFeaturesCache=[];d.hide(this.comparisonSelectBlock);if(this._currentComparisonInfo){var e=this._isMultiFeatureChart&&!f.isLineLike(this._currentChartType);this.comparisonLabel.innerHTML=e?b.selectOrAddGeographyToCompare:f.isColumnBarLike(this._getComparisonChartType())?b.comparisonLabelBars:b.comparisonLabelDots;this.comparisonLabel.style.color=this.viewModel.getDocumentDefaultStyles(this.theme).color;this.comparisonSelect=(new h({fields:this._getFieldsForComparisons(),
canAddFeatures:e,addFeatureMessage:b.addToChart,featureIsAlreadyAddedMessage:b.alreadyAdded,canRemoveFeatures:e,removeFeatureMessage:b.removeFromChart,onFeatureSelected:function(b,c){a._setComparisonId(c)},isFeatureAdded:function(b,c){return a._comparisonValue===c||-1!==a._additionalFeaturesCache.indexOf(c)},canRemoveFeature:function(b,c){return a._comparisonValue!==c},onAddFeature:function(b,c){a._additionalFeaturesCache.push(c);a._updateSeries()},onRemoveFeature:function(b,c){a._additionalFeaturesCache.splice(a._additionalFeaturesCache.indexOf(c),
1);a._updateSeries()}})).placeAt(this.comparisonSelectDiv);this.own(this.comparisonSelect);this.comparisonSelect.setFeatures(this._getGeoenrichment().getData().features);this._comparisonValue=this.comparisonSelect.setDefaultValue();this.comparisonSelect.get("options").length?(d.show(this.comparisonSelectBlock),d.enableContent(this.comparisonSelectBlock,!!this.viewModel.dynamicReportInfo)):(this.comparisonSelect.destroy(),this._currentComparisonInfo=null)}},_createDummyGE:function(){return m.getInstance()},
_getComparisonChartType:function(){return this._currentComparisonInfo&&this._currentComparisonInfo.chartType||this._currentChartType},_getGeoenrichment:function(){return this._currentComparisonInfo?this._ge?this._ge:this._ge=this.viewModel.dynamicReportInfo?new l(this._currentComparisonInfo.calculatorName,this.viewModel.dynamicReportInfo.fieldData.areaData,this._isMultiFeatureChart,this.currentFeatureIndex):this._createDummyGE():null},_getFieldsForComparisons:function(){var a=this._originalSeriesItems[0];
return a&&a.points.map(function(a){return{label:a.label,name:a.fieldInfo.name,formatFunction:function(b){return k.valueFormatFunction(b,a.fieldInfo)}}})},_setComparisonId:function(a){a!==this._comparisonValue&&(this._comparisonValue=a,this.comparisonSelect.get("value")!==this._comparisonValue&&this.comparisonSelect.set("value",this._comparisonValue),this._updateSeries())}})});