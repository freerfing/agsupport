// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.26/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/utils/ChartDataUtil",["../../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer","esri/dijit/geoenrichment/utils/ObjectUtil","../../ChartTypes"],function(k,n,p){var f={formatNumber:function(a,b,d,f){a=n.formatNumber(a||0,{places:b.dataLabelsDecimals||0,preserveTrailingZeroes:!0});d&&(a+="%");return a},undefinedToDefault:function(a,b){return void 0===a?b:a}},g=[1E3,1100,1200,150,70,900,110,300,80,200,1700],q=[1E3,
-300,700,-150,70,100,-200,900,110,300,80,200,1700],r=[1,.7,1.2,.5,1.1,1.3,.3,2,.4],t=[.91,.92,.9,1.2,1.2,1.3];f.CHART_DATA_SMOOTH=[1145,1134,1159,1275,1404,1408,1337,1149,1074,1040,1065,1078,964,798,531,360,254,258];f.getPreviewValue=function(a,b,d,f,c,e,l,m,h,u,v,w,x){if(a.value&&(a.value.value||l.dynamicReportInfo))return a.value.value;l.dynamicReportInfo?(c=u?w.getFieldValueAt(a.fieldInfo.name,v):k.getFieldDataValue(a.fieldInfo,l.dynamicReportInfo.fieldData,m),c=n.parseNumber(c),isNaN(c)&&console.log("Can't render chart value for field \x3d\x3e "+
(a.fieldInfo?a.fieldInfo.name:"missing field"))):(a=a.fieldInfo&&a.fieldInfo.statefulName&&a.fieldInfo.statefulName.charAt(0),c===p.GAUGE&&"p"!==a&&e.gaugeRangeMax?(b=e.gaugeRangeMin||0,c=.4*(e.gaugeRangeMax-b)+b):(h=h||(x?q:g),c=h[b%h.length],c*=r[d%r.length]*(0===d?1:t[b%t.length]),e.conditionalStyling||(e=c,"p"===a&&(e=Number((e/25).toFixed(1))),"i"===a&&(e=Number((e/7).toFixed(1))),c=e)));return c};f.getCaptionValue=function(a,b){return a.captionFieldInfo?b.dynamicReportInfo?k.getFieldDataValue(a.captionFieldInfo,
b.dynamicReportInfo.fieldData):k.renderFieldInfoInTableCell(a.captionFieldInfo).formattedValue:""};f.allowNegativeValuesInPreview=function(a,b){return p.supportsNegativeValues(a)&&!b.isStacked&&!b.renderColumnBarsInOppositeDirections};f.getChartData=function(a,b,d,f){d=(d||(f?q:g)).slice();d.length=Math.min(d.length,b);var c=-Infinity;d.forEach(function(a){c=Math.max(c,a)});var e=1.1*a.max/c;return d=d.map(function(a){return a*e})};var m=g;f.setPreviewChartData=function(a){g=a||m};return f});