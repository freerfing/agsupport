// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(p,q,k,m,e,b,u,n){p=p([b,u],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(b,g){q.mixin(this,g);this.initialize(b,g)},getTitle:function(b){var g;this.info&&(g=this.titleHasRelatedFields?"":this._getPopupValues(b,null,!0).title);return g||
""},getContent:function(b){return this.info?(new n({template:this,graphic:b,chartTheme:this.chartTheme},m.create("div"))).domNode:""}});k("extend-esri")&&q.setObject("dijit.PopupTemplate",p,e);return p})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./support/expressionUtils ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(p,q,k,m,e,b,u,n,w,g,t,C,v,A,B,D,F,h,c,y,x){p=p(null,{declaredClass:"esri.PopupInfo",_reExprField:/^\s*expression\//i,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",initialize:function(a,d){if(a){q.mixin(this,d);this.info=a;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var c=this._fieldLabels={},r=this._fieldsMap={};this.info.fieldInfos&&k.forEach(this.info.fieldInfos,function(l){var f=l.fieldName.toLowerCase(),
a=this._isExpressionField(f)?this.getExpressionInfo(f):null;c[f]=a?a.title:l.label;r[f]=l},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix))}},toJson:function(){return m.fromJson(m.toJson(this.info))},getTitle:function(){},getContent:function(){},getFieldInfo:function(a){var d;k.some(this.info&&this.info.fieldInfos,function(c){c.fieldName===a&&(d=c);return!!d});return d},getExpressionInfo:function(a){if(this._isExpressionField(a)){a=a.replace(this._reExprField,
"");a=a.toLowerCase();var d;k.some(this.info.expressionInfos,function(c){c.name.toLowerCase()===a&&(d=c);return!!d});return d}},hasGeometryOperations:function(){return k.some(this.info.expressionInfos,function(a){return c.hasGeometryOperations(a.expression)})},getComponents:function(a){var d=this.info,c={};d.fieldInfos&&(d=k.filter(d.fieldInfos,function(a){return-1!==a.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<d.length&&(c.relatedInfo=this._getRelatedRecords({graphic:a,fieldsInfo:d}));
this._needFullResolutionFeature(a)&&(c.fullResolutionFeature=this._getFullResolutionFeature(a));return A(c).then(q.hitch(this,function(d){return this._getPopupValues(a,d.fullResolutionFeature)}))},getAttachments:function(a){var d=a.getSourceLayer();a=a.attributes;if(this.info.showAttachments&&d&&d.hasAttachments&&d.objectIdField&&(a=a&&a[d.objectIdField]))return d.queryAttachmentInfos(a)},_needFullResolutionFeature:function(a){return(a=a.getSourceLayer())?"esriGeometryPoint"!==a.geometryType&&"function"===
typeof a.getMaxAllowableOffset&&0<a.getMaxAllowableOffset()&&this.hasGeometryOperations():!1},_getFullResolutionFeature:function(a){var d=a.getSourceLayer(),c=d.objectIdField;a=(a=a.attributes)&&c&&a[c];if(null==a)return null;var r=new B;r.objectIds=[a];r.maxAllowableOffset=0;r.outFields=[c];return d.queryFeatures(r).then(function(l){return l.features&&l.features[0]})},_isExpressionField:function(a){return this._reExprField.test(a)},_compileExpressions:function(a){var d={};k.forEach(a,function(a){var c=
a.returnType&&a.returnType.toLowerCase();d[a.name]=y.createAttributeCache({valueExpression:a.expression},"number"!==c)});return d},_fetchAttributes:function(a,d){var h=q.clone(a.attributes)||{},r=d&&d.geometry,l=this._exprPrefix,f=this._exprCache;k.forEach(this.info.expressionInfos,function(d){var E=l+d.name;d=(d=f[d.name])?a._getDataValue(d.attributeInfo,d,c,null,r):null;"string"===typeof d&&(d=g.encode(d));h[E]=d});return h},_getPopupValues:function(a,d,c){var r=this.info,l=a.getSourceLayer(),f=
this._fetchAttributes(a,d),h=q.clone(f);d=r.fieldInfos;var z="",b="",y,x,g,e,v,w=l&&l._getDateOpts&&l._getDateOpts().properties,w=w&&w.slice(0),n={dateFormat:{properties:w,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};if(this._relatedInfo)for(e in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(e)){var m=this._relatedInfo[e],u=this._relatedLayersInfo[e];m&&(k.forEach(m.relatedFeatures,function(l){for(v in l.attributes)if(l.attributes.hasOwnProperty(v)&&"esriRelCardinalityOneToOne"===
u.relation.cardinality){var a=this._toRelatedFieldName([u.relation.id,v]);f[a]=h[a]=l.attributes[v]}},this),k.forEach(m.relatedStatsFeatures,function(l){for(v in l.attributes)if(l.attributes.hasOwnProperty(v)){var a=this._toRelatedFieldName([u.relation.id,v]);f[a]=h[a]=l.attributes[v]}},this))}d&&k.forEach(d,function(f){x=f.fieldName;var a=this._getLayerFieldInfo(l,x);a&&(x=f.fieldName=a.name);h[x]=this._formatValue(h[x],x,n);w&&f.format&&f.format.dateFormat&&(f=k.indexOf(w,x),-1<f&&w.splice(f,1))},
this);if(l){e=l.types;var p=(m=l.typeIdField)&&f[m];for(x in f)if(f.hasOwnProperty(x)&&-1===x.indexOf(this._relatedFieldPrefix)&&(g=f[x],t.isDefined(g))){var A=this._getDomainName(l,a,e,p,x,g);t.isDefined(A)?h[x]=A:x===m&&(A=this._getTypeName(l,a,g),t.isDefined(A)&&(h[x]=A))}}r.title&&(z=this._processFieldsInLinks(this._fixTokens(r.title,l),f),z=q.trim(this._removeEmptyHref(t.substitute(h,z,n)||"")));if(c)return{title:z};r.description&&(b=this._processFieldsInLinks(this._fixTokens(r.description,l),
f),b=q.trim(this._removeEmptyHref(t.substitute(h,b,n)||"")));d&&(y=[],k.forEach(d,function(f){(x=f.fieldName)&&f.visible&&y.push([this._fieldLabels[x.toLowerCase()]||x,t.substitute(h,"${"+x+"}",n)||""])},this));var C,B;r.mediaInfos&&(C=[],k.forEach(r.mediaInfos,function(a){B=0;g=a.value;switch(a.type){case "image":var d=g.sourceURL,d=d&&q.trim(this._removeEmptyHref(t.substitute(f,this._fixTokens(d,l))));B=!!d;break;case "piechart":case "linechart":case "columnchart":case "barchart":var c,d=g.normalizeField;
g.fields=k.map(g.fields,function(f){return(c=this._getLayerFieldInfo(l,f))?c.name:f},this);d&&(c=this._getLayerFieldInfo(l,d),g.normalizeField=c?c.name:d);B=k.some(g.fields,function(l){return t.isDefined(f[l])||-1!==l.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(B){a=q.clone(a);g=a.value;var d=a.title?this._processFieldsInLinks(this._fixTokens(a.title,l),f):"",r=a.caption?this._processFieldsInLinks(this._fixTokens(a.caption,l),f):"";a.title=d?q.trim(this._removeEmptyHref(t.substitute(h,
d,n)||"")):"";a.caption=r?q.trim(this._removeEmptyHref(t.substitute(h,r,n)||"")):"";if("image"===a.type)g.sourceURL=t.substitute(f,this._fixTokens(g.sourceURL,l)),g.linkURL&&(g.linkURL=q.trim(t.substitute(f,this._fixTokens(g.linkURL,l))||""));else{var z,E;k.forEach(g.fields,function(l,a){if(-1!==l.indexOf(this._relatedFieldPrefix))E=this._getRelatedChartInfos(l,g,f,n),E instanceof Array?g.fields=E:g.fields[a]=E;else{var d=f[l],d=void 0===d?null:d;z=f[g.normalizeField]||0;d&&z&&(d/=z);g.fields[a]=
{y:d,tooltip:(this._fieldLabels[l.toLowerCase()]||l)+":\x3cbr/\x3e"+this._formatValue(d,l,n,!!z)}}},this)}C.push(a)}},this));return{title:z,description:b,hasDescription:!!r.description,fields:y&&y.length?y:null,mediaInfos:C&&C.length?C:null,formatted:h,editSummary:l&&l.getEditSummary?l.getEditSummary(a):""}},_getRelatedChartInfos:function(a,d,c,r){var l,f,h,z,b,x;l=[];x=this._fromRelatedFieldName(a);b=x[0];f=this._relatedInfo[b];b=this._relatedLayersInfo[b];f&&k.forEach(f.relatedFeatures,function(f){f=
f.attributes;var E,b;for(b in f)if(f.hasOwnProperty(b)&&b===x[1]){E={};z=f[b];d.normalizeField&&(h=-1!==d.normalizeField.indexOf(this._relatedFieldPrefix)?f[this._fromRelatedFieldName(d.normalizeField)[1]]:c[d.normalizeField]);z&&h&&(z/=h);if(d.tooltipField)if(-1!==d.tooltipField.indexOf(this._relatedFieldPrefix)){var g=this._fromRelatedFieldName(d.tooltipField)[1],y=t.isDefined(f[g])?this._formatValue(f[g],d.tooltipField,r,!!h):g;E.tooltip=y+":\x3cbr/\x3e"+this._formatValue(z,g,r,!!h)}else E.tooltip=
(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(z,d.tooltipField,r,!!h);else E.tooltip=z;E.y=z;l.push(E)}},this);return"esriRelCardinalityOneToMany"===b.relation.cardinality||"esriRelCardinalityManyToMany"===b.relation.cardinality?l:l[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"([^\"]+)\"/ig,_reHrefApos:/href\s*=\s*\'([^\']+)\'/ig,
_fixTokens:function(a,d){var c=this;return a.replace(/(\{([^\{\r\n]+)\})/g,function(a,l,f){a=c._getLayerFieldInfo(d,f);return"$"+(a?"{"+a.name+"}":l)})},_encodeAttributes:function(a){a=q.clone(a)||{};var d,c;for(d in a)(c=a[d])&&"string"===typeof c&&(c=encodeURIComponent(c).replace(/\'/g,"\x26apos;"),a[d]=c);return a},_processFieldsInLinks:function(a,d){var c=this._encodeAttributes(d);d=q.hitch(this,this._addValuesToHref,d,c);a&&(a=a.replace(this._reHref,d).replace(this._reHrefApos,d));return a},
_addValuesToHref:function(a,d,c,h){h=h&&q.trim(h);return c=t.substitute(h&&0===h.indexOf("${")?a:d,c)},_getLayerFieldInfo:function(a,d){return a&&a.getField?a.getField(d):null},_formatValue:function(a,d,c,h){var l=this._fieldsMap[d.toLowerCase()],f=l&&l.format;d=-1!==k.indexOf(c.dateFormat.properties,d);var r="number"===typeof a&&!d&&(!f||!f.dateFormat);if(!t.isDefined(a)||!l||!t.isDefined(f))return r?this._forceLTR(a):a;var z="",l=[],b=f.hasOwnProperty("places")||f.hasOwnProperty("digitSeparator"),
g=f.hasOwnProperty("digitSeparator")?f.digitSeparator:!0;if(b&&!d)z="NumberFormat",l.push("places: "+(t.isDefined(f.places)&&(!h||0<f.places)?Number(f.places):"Infinity")),l.length&&(z+="("+l.join(",")+")");else if(f.dateFormat)z="DateFormat"+this._insertOffset(this._dateFormats[f.dateFormat]||this._dateFormats.shortDateShortTime);else return r?this._forceLTR(a):a;var y=this._applyFormatting(a,z,c);b&&-1<a.constructor.toString().indexOf("Array")&&(y="",k.forEach(a,q.hitch(this,function(f,l){l&&(y+=
" ");y+=this._applyFormatting(f,z,c)})));b&&!g&&x.group&&(y=y.replace(new RegExp("\\"+x.group,"g"),""));d&&(y='\x3cspan class\x3d"esriDateValue"\x3e'+y+"\x3c/span\x3e");return r?this._forceLTR(y):y},_applyFormatting:function(a,d,c){return t.substitute({myKey:a},"${myKey:"+d+"}",c)||""},_forceLTR:function(a){var d=n("ie");return d&&10>=d?a:"\x3cspan class\x3d'esriNumericValue'\x3e"+a+"\x3c/span\x3e"},_insertOffset:function(a){a&&(a=t.isDefined(this.utcOffset)?a.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+
")"):a);return a},_getDomainName:function(a,d,c,h,l,f){return(a=a.getDomain&&a.getDomain(l,{feature:d}))&&a.codedValues?a.getName(f):null},_getTypeName:function(a,d,c){return(a=a.getType&&a.getType(d))&&a.name},_getRelatedRecords:function(a){var d=a.graphic,c;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=this._getRelatedLayersInfo(a).then(q.hitch(this,function(a){for(c in a)a.hasOwnProperty(c)&&a[c]&&(this._relatedLayersInfo[c].relatedLayerInfo=a[c])})));return this._relatedLayersInfoPromise.then(q.hitch(this,
function(){return this._queryRelatedLayers(d)})).then(q.hitch(this,function(a){this._setRelatedRecords(d,a);return a}))},_getRelatedLayersInfo:function(a){var d=a.fieldsInfo,c,r,l={};c=a.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});k.forEach(d,function(f){var l,a,d,r;l=this._fromRelatedFieldName(f.fieldName);a=l[0];l=l[1];a&&(!this._relatedLayersInfo[a]&&c&&c.relationships&&(k.some(c.relationships,function(f){if(f.id==a)return r=f,!0}),r&&(this._relatedLayersInfo[a]=
{relation:r,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[a]&&(this._relatedLayersInfo[a].relatedFields.push(l),f.statisticType&&(d=new h,d.statisticType=f.statisticType,d.onStatisticField=l,d.outStatisticFieldName=l,this._relatedLayersInfo[a].outStatistics.push(d))))},this);for(r in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(r)&&this._relatedLayersInfo[r]&&(a=this._relatedLayersInfo[r].relation,a=c.url.replace(/[0-9]+$/,a.relatedTableId),this._relatedLayersInfo[r].relatedLayerUrl=
a,l[r]=v({url:a,content:{f:"json"},callbackParamName:"callback"}));return w(l)},_queryRelatedLayers:function(a){var d={},c;for(c in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(c)&&(d[c]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[c]}));return w(d)},_queryRelatedLayer:function(a){var d,c,h,l,f,b,g,x,y,e,v,t,n;d=a.graphic;c=d.getSourceLayer();h=c.url.match(/[0-9]+$/g)[0];v=a.relatedInfo;e=v.relatedLayerInfo;t=v.relatedLayerUrl;a=v.relation;k.some(e.relationships,
function(f){if(f.relatedTableId===parseInt(h,10))return l=f,!0},this);l&&(f=new B,k.some(e.fields,function(f){if(f.name===l.keyField)return x=-1!==k.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],f.type)?"number":"string",!0}),l.relationshipTableId&&l.keyFieldInRelationshipTable?(n=new u,this._queryRelatedRecords(d,l).then(q.hitch(this,function(l){var a;(a=l[d.attributes[c.objectIdField]])?(l=k.map(a.features,function(f){return f.attributes[e.objectIdField]},
this),v.outStatistics&&0<v.outStatistics.length&&e.supportsStatistics&&(y=new B,y.objectIds=l,y.outFields=f.outFields,y.outStatistics=v.outStatistics),y&&(b=new D(t),b.execute(y).then(q.hitch(this,function(f){var l=[];l.push(a);l.push(f);n.resolve(l)})))):n.resolve()}))):(g="string"===x?l.keyField+"\x3d'"+d.attributes[a.keyField]+"'":l.keyField+"\x3d"+d.attributes[a.keyField],f.where=g,f.outFields=v.relatedFields,v.outStatistics&&0<v.outStatistics.length&&e.supportsStatistics&&(y=new B,y.where=f.where,
y.outFields=f.outFields,y.outStatistics=v.outStatistics),b=new D(t),g=[],g.push(b.execute(f)),y&&g.push(b.execute(y))));return g?w(g):n?n.promise:void 0},_setRelatedRecords:function(a,d){this._relatedInfo=[];for(var c in d)d.hasOwnProperty(c)&&d[c]&&(a=d[c],this._relatedInfo[c]={},this._relatedInfo[c].relatedFeatures=a[0].features,t.isDefined(a[1])&&(this._relatedInfo[c].relatedStatsFeatures=a[1].features))},_handlerErrorResponse:function(a,d){a.reject(d)},_fromRelatedFieldName:function(a){var d=
[];-1!==a.indexOf(this._relatedFieldPrefix)&&(a=a.split("/"),d=a.slice(1));return d},_toRelatedFieldName:function(a){var d="";a&&0<a.length&&(d=this._relatedFieldPrefix+a[0]+"/"+a[1]);return d},_queryRelatedRecords:function(a,d){var c=a.getSourceLayer(),h=new F;h.outFields=["*"];h.relationshipId=d.id;h.objectIds=[a.attributes[c.objectIdField]];return c.queryRelatedFeatures(h)},_removeEmptyHref:function(a){return a.replace(/href=(""|'')/gi,"")}});b("extend-esri")&&(C.PopupInfo=C.PopupInfoTemplate=
p);return p})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(p){var q=p.getObject("dojox.html.entities",!0),k=function(e,b){var k,n;if(b._encCache&&b._encCache.regexp&&b._encCache.mapper&&b.length==b._encCache.length)k=b._encCache.mapper,n=b._encCache.regexp;else{k={};n=["["];var w;for(w=0;w<b.length;w++)k[b[w][0]]="\x26"+b[w][1]+";",n.push(b[w][0]);n.push("]");n=new RegExp(n.join(""),"g");b._encCache={mapper:k,regexp:n,length:b.length}}return e=e.replace(n,function(b){return k[b]})},
m=function(e,b){var k,n;if(b._decCache&&b._decCache.regexp&&b._decCache.mapper&&b.length==b._decCache.length)k=b._decCache.mapper,n=b._decCache.regexp;else{k={};n=["("];var w;for(w=0;w<b.length;w++){var g="\x26"+b[w][1]+";";w&&n.push("|");k[g]=b[w][0];n.push(g)}n.push(")");n=new RegExp(n.join(""),"g");b._decCache={mapper:k,regexp:n,length:b.length}}return e=e.replace(n,function(b){return k[b]})};q.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];q.latin=[["\u00a1",
"iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],
["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],
["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],
["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a",
"Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be",
"xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191",
"uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229",
"cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663",
"clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030",
"permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];q.encode=function(e,b){e&&(b?e=k(e,b):(e=k(e,q.html),e=k(e,q.latin)));return e};q.decode=function(e,b){e&&(b?e=m(e,b):(e=m(e,q.html),e=m(e,q.latin)));return e};return q})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(p,q,k){var m=p.forEach;return function(e){function b(b,g){w[g]=b;p.progress([b,g]);0===--v&&p.resolve(w)}var u,n;e instanceof Array?n=e:e&&"object"===typeof e&&(u=e);var w,g=[];if(u){n=
[];for(var t in u)Object.hasOwnProperty.call(u,t)&&(g.push(t),n.push(u[t]));w={}}else n&&(w=[]);if(!n||!n.length)return(new q).resolve(w);var p=new q;p.promise.always(function(){w=g=null});var v=n.length;m(n,function(v,e){u||g.push(e);k(v,function(v){p.isFulfilled()||b(v,g[e])},function(v){p.isFulfilled()||b(v,g[e])})});return p.promise}})},"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),
function(p,q,k,m,e,b,u,n,w,g,t,C,v,A,B){var D=w("esri-pbf"),F=q(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(c){this._handleSuccess=k.hitch(this,this._handleSuccess);this._handleError=k.hitch(this,this._handleError);k.mixin(this,c);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var c=new e(this._canceler);this._fetchDfd=c;this._result=null;this._sendRequest();
return c.promise},_canceler:function(c){var h=c._pendingRequest,b;c.isFulfilled()||!h||h.isFulfilled()||(h.cancel(),b=h.results&&h.results[1]);c._pendingRequest=null;return b},_sendRequest:function(c){var h=this.query;this.pagination&&(this._startPage=h.resultOffset=null==c?0:c,h.resultRecordCount=this.pageSize);c=this.requestOptions;this._fetchDfd._pendingRequest=g({url:this.url,content:h,handleAs:"pbf"===h.f?"arraybuffer":"json",callbackParamName:"callback",timeout:c&&c.timeout},c);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},
_handleSuccess:function(c){this.pagination?(c.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=this._result.features.concat(c.features):this._result=c,this._fetchDfd.progress(c),c.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(c),this._fetchDfd.resolve(c))},_handleError:function(c){this._fetchDfd.reject(c)}}),h=q(A,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],
"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(c,h){this._handler=k.hitch(this,this._handler);this._relationshipQueryHandler=k.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=k.hitch(this,this._executeForIdsHandler);this._countHandler=k.hitch(this,this._countHandler);this._extentHandler=k.hitch(this,this._extentHandler);this.source=h&&h.source;this.gdbVersion=h&&h.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",
c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(c,y,x,a,d){var z=
d.assembly;c=this._encode(k.mixin({},this._url.query,{f:a&&a.format||"json"},c.toJson(z&&z[0])));var r=this._handler,l=this._errorHandler;this.source&&(a={source:this.source.toJson()},c.layer=b.toJson(a));this.gdbVersion&&(c.gdbVersion=this.gdbVersion);var f="pbf"===c.f;if(f){var E;D||(E="QueryTask.execute: 'pbf' format is not supported in your browser.");if(E)return c=new e,c.addErrback(function(f){l(f,x,d.dfd)}),c.reject(Error(E)),c}E=this.requestOptions;E=g({url:this._url.path+"/query",content:c,
callbackParamName:"callback",handleAs:f?"arraybuffer":"json",timeout:E&&E.timeout},E);c=[E];f&&c.push(h.loadPBFReader());(new u(c)).then(function(a){d.dfd.isFulfilled()||(a=a[0],a[0]?r(a[1],f,y,x,d.dfd):l(a[1],x,d.dfd))});return E},rawExecute:function(c,h,g){h=h||{};c=this._encode(k.mixin({},this._url.query,{f:h.format||"json"},c.toJson(g.assembly&&g.assembly[0])));this.source&&(c.layer=b.toJson({source:this.source.toJson()}));this.gdbVersion&&(c.gdbVersion=this.gdbVersion);return(new F({url:this._url.path+
"/query",query:c,requestOptions:this.requestOptions,pagination:h.pagination,pageSize:h.pageSize})).execute().then(null,null,function(a){g.dfd.progress(a)}).then(k.hitch(this,function(a){this._successHandler([a],"onRawExecuteComplete",null,g.dfd)})).otherwise(k.hitch(this,function(a){this._errorHandler(a,null,g.dfd)}))},executeRelationshipQuery:function(c,h,b){c=this._encode(k.mixin({},this._url.query,{f:"json"},c.toJson()));var a=this._relationshipQueryHandler,d=this._errorHandler;this.gdbVersion&&
(c.gdbVersion=this.gdbVersion);var z=new e(t._dfdCanceller),r=this.requestOptions;z._pendingDfd=g({url:this._url.path+"/queryRelatedRecords",content:c,callbackParamName:"callback",timeout:r&&r.timeout,load:function(l,f){a(l,f,h,b,z)},error:function(l){d(l,b,z)}},r);return z},executeForIds:function(c,h,x,a){var d=a.assembly;c=this._encode(k.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},c.toJson(d&&d[0])));var z=this._executeForIdsHandler,r=this._errorHandler;this.source&&(d={source:this.source.toJson()},
c.layer=b.toJson(d));this.gdbVersion&&(c.gdbVersion=this.gdbVersion);d=this.requestOptions;return g({url:this._url.path+"/query",content:c,callbackParamName:"callback",timeout:d&&d.timeout,load:function(l,f){z(l,f,h,x,a.dfd)},error:function(l){r(l,x,a.dfd)}},d)},executeForCount:function(c,h,x,a){var d=a.assembly;c=this._encode(k.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},c.toJson(d&&d[0])));var z=this._countHandler,r=this._errorHandler;this.source&&(d={source:this.source.toJson()},
c.layer=b.toJson(d));this.gdbVersion&&(c.gdbVersion=this.gdbVersion);d=this.requestOptions;return g({url:this._url.path+"/query",content:c,callbackParamName:"callback",timeout:d&&d.timeout,load:function(l,f){z(l,f,h,x,a.dfd)},error:function(l){r(l,x,a.dfd)}},d)},executeForExtent:function(c,h,x,a){var d=a.assembly;c=this._encode(k.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},c.toJson(d&&d[0])));var z=this._extentHandler,r=this._errorHandler;this.source&&(d={source:this.source.toJson()},
c.layer=b.toJson(d));this.gdbVersion&&(c.gdbVersion=this.gdbVersion);d=this.requestOptions;return g({url:this._url.path+"/query",content:c,callbackParamName:"callback",timeout:d&&d.timeout,load:function(l,f){z(l,f,h,x,a.dfd)},error:function(l){r(l,x,a.dfd)}},d)},_handler:function(c,b,g,a,d){try{c&&b&&(c=h.pbfDeps.optimizedFeatures.convertToFeatureSet(h.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(c)));var z=new B(c);this._successHandler([z],"onComplete",g,d)}catch(r){this._errorHandler(r,a,d)}},_relationshipQueryHandler:function(c,
h,b,a,d){try{var g=c.geometryType,r=c.spatialReference,l={};m.forEach(c.relatedRecordGroups,function(f){var a={};a.geometryType=g;a.spatialReference=r;a.features=f.relatedRecords;a=new B(a);if(null!=f.objectId)l[f.objectId]=a;else for(var d in f)f.hasOwnProperty(d)&&"relatedRecords"!==d&&(l[f[d]]=a)});this._successHandler([l],"onExecuteRelationshipQueryComplete",b,d)}catch(f){this._errorHandler(f,a,d)}},_executeForIdsHandler:function(c,h,b,a,d){try{this._successHandler([c.objectIds],"onExecuteForIdsComplete",
b,d)}catch(z){this._errorHandler(z,a,d)}},_countHandler:function(c,h,b,a,d){try{var g,r=c.features,l=c.objectIds;if(l)g=l.length;else{if(r)throw Error("Unable to perform query. Please check your parameters.");g=c.count}this._successHandler([g],"onExecuteForCountComplete",b,d)}catch(f){this._errorHandler(f,a,d)}},_extentHandler:function(c,h,b,a,d){try{c.extent&&(c.extent=new C(c.extent)),this._successHandler([c],"onExecuteForExtentComplete",b,d)}catch(z){this._errorHandler(z,a,d)}}});h.loadPBFReader=
function(){var c=new e;h.pbfDeps?c.resolve():p(["./support/pbfDeps"],function(b){h.pbfDeps=b;c.isFulfilled()||c.resolve()});return c.promise};v._createWrappers(h);w("extend-esri")&&k.setObject("tasks.QueryTask",h,n);return h})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(p,q,k){p.DeferredList=function(m,e,b,p,n){var w=[];q.call(this);var g=this;0!==m.length||e||this.resolve([0,[]]);var t=0;k.forEach(m,function(k,v){function n(b,e){w[v]=[b,e];
t++;t===m.length&&g.resolve(w)}k.then(function(b){e?g.resolve([v,b]):n(!0,b)},function(v){b?g.reject(v):n(!1,v);if(p)return null;throw v;})})};p.DeferredList.prototype=new q;p.DeferredList.prototype.gatherResults=function(m){m=new p.DeferredList(m,!1,!0,!1);m.addCallback(function(e){var b=[];k.forEach(e,function(e){b.push(e[1])});return b});return m};return p.DeferredList})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),
function(p,q,k,m,e,b,u,n){p=p(n,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(b,g){b&&q.isString(b)&&(this._url=u.urlToObject(this.url=b));g&&g.requestOptions&&(this.requestOptions=g.requestOptions);this.normalization=!0;this._errorHandler=q.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var b=this._url,g=/^http:/i;this.url&&(this.url=this.url.replace(g,"https:"));b&&b.path&&(b.path=b.path.replace(g,"https:"))},
_encode:function(b,g,e){var n,v,t={},w,m;for(w in b)if("declaredClass"!==w&&(n=b[w],v=typeof n,null!==n&&void 0!==n&&"function"!==v))if(q.isArray(n))for(t[w]=[],m=n.length,v=0;v<m;v++)t[w][v]=this._encode(n[v]);else"object"===v?n.toJson&&(v=n.toJson(e&&e[w]),"esri.tasks.FeatureSet"===n.declaredClass&&v.spatialReference&&(v.sr=v.spatialReference,delete v.spatialReference),t[w]=g?v:k.toJson(v)):t[w]=n;return t},_successHandler:function(e,g,n,k){g&&this[g].apply(this,e);n&&n.apply(null,e);k&&b._resDfd(k,
e)},_errorHandler:function(b,g,e){this.onError(b);g&&g(b);e&&e.errback(b)},setNormalization:function(b){this.normalization=b},onError:function(){}});m("extend-esri")&&(e.Task=p);return p})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(p,q,k,m,e,b,u,n,w,g,t,C){p=p(null,{declaredClass:"esri.tasks.FeatureSet",
constructor:function(b,g){if(b){q.mixin(this,b);var e=this.features=this.features||[],v=b.spatialReference,v=this.spatialReference=t.createInstance(n.simpleConstructor,v),m=t.getGeometryType(b.geometryType);this.geometryType=b.geometryType;b.fields&&(this.fields=b.fields);b=t.supportsLazyUnquantization(this.geometryType);var h=t.unquantizeFunction(this.geometryType,this.transform),c=!!(g&&b&&h),y=m&&(c?m.accessorConstructor:m.simpleConstructor);k.forEach(e,function(b,a){var d=t.createInstance(u.simpleConstructor),
g=b.geometry;if(m&&g){var r=d.geometry=t.createInstance(y,c?null:g);r.setSpatialReference(g.spatialReference?t.createInstance(n.simpleConstructor,g.spatialReference):v);c&&r.setupLazyUnquantization(h,g)}d.symbol=b.symbol?C.fromJson(b.symbol):null;d.attributes=b.attributes;e[a]=d});c||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(g){var e={};this.displayFieldName&&(e.displayFieldName=this.displayFieldName);this.fields&&
(e.fields=this.fields);this.spatialReference?e.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(e.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(e.geometryType=t.getJsonType(this.features[0].geometry)),e.features=w._encodeGraphics(this.features,g));e.geometryType=e.geometryType||this.geometryType;e.exceededTransferLimit=this.exceededTransferLimit;e.transform=this.transform;return b.fixJson(e)},
_hydrate:function(){t.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(b){if(!this.geometryType)return this.transform=null,this;var g=b.translate[0],e=b.translate[1],n=b.scale[0],v=b.scale[1],h=this.features,c=function(a,c,h){var l,f,d,b,r,g,e=[];l=0;for(f=a.length;l<f;l++)if(d=a[l],0<l){if(g=c(d[0]),d=h(d[1]),g!==b||d!==r)e.push([g-b,d-r]),b=g,r=d}else b=c(d[0]),r=h(d[1]),e.push([b,r]);return 0<e.length?e:null},k=function(a,h,b){if("esriGeometryPoint"===
a)return function(a){a.x=h(a.x);a.y=b(a.y);return a};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){var f,l,d,r,g;d=a.rings||a.paths;g=[];f=0;for(l=d.length;f<l;f++)r=d[f],(r=c(r,h,b))&&g.push(r);return 0<g.length?(a.rings?a.rings=g:a.paths=g,a):null};if("esriGeometryMultipoint"===a)return function(a){var f;f=c(a.points,h,b);return 0<f.length?(a.points=f,a):null};if("esriGeometryEnvelope"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-
g)/n)},function(a){return Math.round((e-a)/v)}),x,a;x=0;for(a=h.length;x<a;x++)h[x].geometry&&(k(h[x].geometry)||h[x].setGeometry(null));this.transform=b;return this}});p.createGraphics=function(b){var g=b.geometryType,e=t.createInstance(n.simpleConstructor,b.spatialReference),v=t.getGeometryType(g).accessorConstructor,m=t.unquantizeFunction(g,b.transform);return k.map(b.features,function(h,c){c=t.createInstance(u.simpleConstructor);var b=h.geometry;if(b){var g=c.geometry=t.createInstance(v);g.setSpatialReference(e);
g.setupLazyUnquantization(m,b)}c.attributes=h.attributes;return c})};p.createPolygon=function(b,e,n){var k;b&&(k=t.createInstance(g.accessorConstructor),k.setSpatialReference(e),e=t.unquantizeFunction("esriGeometryPolygon",n),k.setupLazyUnquantization(e,b));return k};m("extend-esri")&&q.setObject("tasks.FeatureSet",p,e);return p})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(p,q,k,m,e){p=p(null,{declaredClass:"esri.tasks.RelationshipQuery",
definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var b={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},e=this.objectIds,n=this.outFields,m=this.outSpatialReference,g=this.orderByFields;e&&(b.objectIds=e.join(","));n&&(b.outFields=n.join(","));
m&&(b.outSR=m.wkid||k.toJson(m.toJson()));g&&(b.orderByFields=g.join(","));b._ts=this._ts;return b}});m("extend-esri")&&q.setObject("tasks.RelationshipQuery",p,e);return p})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(p,q,k,m){p=p(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,
maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});k("extend-esri")&&q.setObject("tasks.StatisticDefinition",p,m);return p})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(p,q,k,m,e,b,u,n,w,g,t,C,v,A,B,D,F,h,c,y,x){var a=0,d=x.widgets.popup,z=x.widgets.templatePicker;q=q([y,B,D],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=m.mixin({},d)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(z.loading);this._contentDfd=this.template.getComponents(this.graphic).then(m.hitch(this,this._handleComponentsSuccess)).otherwise(m.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var a=this._mediaInfos,l=a.length,f=this.domNode,d=this._prevMedia,c=this._nextMedia;if(1<l){var h=0,z=0;e.forEach(a,function(a){"image"===a.type?h++:-1!==a.type.indexOf("chart")&&z++});h&&(g.set(this._imageCount,"innerHTML",h),b.query(".summary .image",
f).removeClass("hidden"));z&&(g.set(this._chartCount,"innerHTML",z),b.query(".summary .chart",f).removeClass("hidden"))}else b.query(".summary",f).addClass("hidden"),t.add(d,"hidden"),t.add(c,"hidden");a=this._mediaPtr;0===a?t.add(d,"hidden"):t.remove(d,"hidden");a===l-1?t.add(c,"hidden"):t.remove(c,"hidden");this._destroyFrame()},_displayMedia:function(){var d=this._mediaInfos[this._mediaPtr],l=d.title,f=d.caption,c=b.query(".mediaSection .hzLine",this.domNode)[0];g.set(this._mediaTitle,"innerHTML",
l);t[l?"remove":"add"](this._mediaTitle,"hidden");g.set(this._mediaCaption,"innerHTML",f);t[f?"remove":"add"](this._mediaCaption,"hidden");t[l&&f?"remove":"add"](c,"hidden");this._rid=null;if("image"===d.type)this._showImage(d);else{var h=this,l=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],f=d.value.theme||this.chartTheme;m.isString(f)&&(f=f.replace(/\./gi,"/"),-1===f.indexOf("/")&&(f="dojox/charting/themes/"+f));f||(f="./Rainbow");l.push(f);try{var e=this._rid=a++;p(l,function(a,
f,l){e===h._rid&&(h._rid=null,h._showChart(d.type,d.value,a,f,l))})}catch(N){console.log("PopupRenderer: error loading modules")}}},_preventNewTab:function(a){return(a=a&&m.trim(a).toLowerCase())&&(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_showImage:function(a){t.add(this._mediaFrame,"image");var l=v.get(this._gallery,"height"),f=a.value,d;f.linkURL&&(d=C.create("a",{href:f.linkURL,target:this._preventNewTab(f.linkURL)?"":"_blank"},this._mediaFrame));f=a.refreshInterval?this._addURLParameter(f.sourceURL,
"timestamp",Date.now()):f.sourceURL;C.create("img",{className:"esriPopupMediaImage",src:f},d||this._mediaFrame);var c=b.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=k.connect(c,"onload",this,function(){this._clearImageHandles();this._imageLoaded(c,l);this._initImageRefresh(a)})},_addURLParameter:function(a,l,f){var d=-1===a.indexOf("?")?"?":"\x26";return a+d+l+"\x3d"+f},_initImageRefresh:function(a){if(a.refreshInterval){var l=6E4*a.refreshInterval;this._imageRefreshHandle=
setTimeout(m.hitch(this,function(){this._destroyFrame();this._showImage(a)}),l)}},_clearImageHandles:function(){k.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(a,l,f,d,c){t.remove(this._mediaFrame,"image");f=this._chart=new f(C.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});c&&f.setTheme(c);switch(a){case "piechart":f.addPlot("default",{type:"Pie",labels:!1});f.addSeries("Series A",
l.fields);break;case "linechart":f.addPlot("default",{type:"Markers"});f.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});f.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});e.forEach(l.fields,function(a,f){a.x=f+1});f.addSeries("Series A",l.fields);break;case "columnchart":f.addPlot("default",{type:"Columns",gap:3});f.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});f.addSeries("Series A",l.fields);break;case "barchart":f.addPlot("default",{type:"Bars",
gap:3}),f.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),f.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),f.addSeries("Series A",l.fields)}this._action=new d(f);f.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);g.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(a,l){var f=a.height;f<l&&v.set(a,"marginTop",
Math.round((l-f)/2)+"px")},_attListHandler:function(a,l){if(a===this._attachmentsDfd){this._attachmentsDfd=null;var f="";l instanceof Error||!l||!l.length||e.forEach(l,function(a){f+="\x3cli\x3e";f+="\x3ca href\x3d'"+c.addProxy(a.url)+"' target\x3d'_blank'\x3e"+(a.name||"[No name]")+"\x3c/a\x3e";f+="\x3c/li\x3e"});g.set(this._attachmentsList,"innerHTML",f||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_supportedURIInfos:[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:d.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,
appName:"Survey123",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:d.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:d.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:d.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:d.NLS_openLinkInApp},
{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,appName:"Microsoft Power BI",label:d.NLS_openLinkInApp}],_findURIInfo:function(a){var l;e.some(this._supportedURIInfos,function(f){f.pattern.test(a)&&(l=f);return!!l});return l},_createLinkIfURI:function(a){var l=this._findURIInfo(a);if(l){var f=a.match(l.pattern);return a.replace(l.pattern,"\x3ca target\x3d'_blank' href\x3d'$1' title\x3d'$1'\x3e"+h.substitute({appName:l.appName,hierPart:f&&f[2]},l.label)+"\x3c/a\x3e")}return a},_showStatus:function(a){g.set(this._status,
"innerHTML",a);t.remove(this._status,"hidden");b.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){g.set(this._status,"innerHTML","");t.add(this._status,"hidden");b.query(".mainSection",this.domNode).removeClass("hidden")},_handleComponentsSuccess:function(a){if(a){this._hideStatus();var l=this.showTitle?a.title:"",f=a.description,c=a.fields,h=a.mediaInfos,r=this.domNode,z=this._nls,n=this,k=this.template,v=this.graphic;this._prevMedia.title=z.NLS_prevMedia;this._nextMedia.title=
z.NLS_nextMedia;g.set(this._title,"innerHTML",l);l||t.add(this._title,"hidden");!a.hasDescription&&c&&(f="",e.forEach(c,function(a){f+="\x3ctr valign\x3d'top'\x3e";f+="\x3ctd class\x3d'attrName'\x3e"+A.encode(a[0])+"\x3c/td\x3e";f+="\x3ctd class\x3d'attrValue'\x3e"+this._createLinkIfURI(a[1])+"\x3c/td\x3e";f+="\x3c/tr\x3e"},this),f&&(f="\x3ctable class\x3d'attrTable' cellpadding\x3d'0px' cellspacing\x3d'0px'\x3e"+f+"\x3c/table\x3e"));g.set(this._description,"innerHTML",f);f||t.add(this._description,
"hidden");b.query("a",this._description).forEach(function(a){n._preventNewTab(a.href)?"_blank"===a.target&&g.remove(a,"target"):g.set(a,"target","_blank")});l&&f?b.query(".mainSection .hzLine",r).removeClass("hidden"):l||f?b.query(".mainSection .hzLine",r).addClass("hidden"):b.query(".mainSection",r).addClass("hidden");if(l=this._attachmentsDfd=k.getAttachments(v))l.addBoth(m.hitch(this,this._attListHandler,l)),g.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+z.NLS_searching+"...\x3c/li\x3e"),
b.query(".attachmentsSection",r).removeClass("hidden");h&&h.length&&(b.query(".mediaSection",r).removeClass("hidden"),w.setSelectable(this._mediaFrame,!1),this._mediaInfos=h,this._mediaPtr=0,this._updateUI(),this._displayMedia());a.editSummary&&(g.set(this._editSummary,"innerHTML",a.editSummary),h&&h.length&&t.remove(this._mediaBreak,"hidden"),t.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(d.NLS_noInfo)},_handleComponentsError:function(a){a&&"cancel"===
a.dojoType||(console.log("PopupRenderer: error loading template",a),this._showStatus(d.NLS_noInfo))}});u("extend-esri")&&m.setObject("dijit._PopupRenderer",q,F);return q})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(p,q,k,m,e,b,u,n,w,g,t,C,v){function A(){}function B(b){return function(g,
h,c,e){return g&&"string"==typeof h&&g[h]==A?g.on(h.substring(2).toLowerCase(),u.hitch(c,e)):b.apply(k,arguments)}}p.around(k,"connect",B);b.connect&&p.around(b,"connect",B);p=m("dijit._Widget",[t,C,v],{onClick:A,onDblClick:A,onKeyDown:A,onKeyPress:A,onKeyUp:A,onMouseDown:A,onMouseMove:A,onMouseOut:A,onMouseOver:A,onMouseLeave:A,onMouseEnter:A,onMouseUp:A,constructor:function(b){this._toConnect={};for(var g in b)this[g]===A&&(this._toConnect[g.replace(/^on/,"").toLowerCase()]=b[g],delete b[g])},postCreate:function(){this.inherited(arguments);
for(var b in this._toConnect)this.on(b,this._toConnect[b]);delete this._toConnect},on:function(b,g){return this[this._onMap(b)]===A?k.connect(this.domNode,b.toLowerCase(),this,g):this.inherited(arguments)},_setFocusedAttr:function(b){this._focused=b;this._set("focused",b)},setAttribute:function(g,e){b.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(g,e)},attr:function(b,g){return 2<=arguments.length||"object"===typeof b?this.set.apply(this,
arguments):this.get(b)},getDescendants:function(){b.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?n("[widgetId]",this.containerNode).map(g.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});e("dijit-legacy-requires")&&w(0,function(){require(["dijit/_base"])});return p})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(p,q,k,m,e,b,u,n,w,g,t,C,v,A,B,D,F,h,c,y,x,a,d){function z(a){return function(f){n[f?"set":"remove"](this.domNode,a,f);this._set(a,f)}}v.add("dijit-legacy-requires",!A.isAsync);v.add("dojo-bidi",!1);v("dijit-legacy-requires")&&F(0,function(){p(["dijit/_base/manager"])});var r={};m=b("dijit._WidgetBase",[h,x],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:z("lang"),dir:"",_setDirAttr:z("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:m.blankGif||p.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var f=a.prototype,d=a._setterAttrs=[],a=a._onMap={},c;for(c in f.attributeMap)d.push(c);for(c in f)/^on/.test(c)&&(a[c.substring(2).toLowerCase()]=c),/^_set[A-Z](.*)Attr$/.test(c)&&(c=c.charAt(4).toLowerCase()+
c.substr(5,c.length-9),f.attributeMap&&c in f.attributeMap||d.push(c))}},postscript:function(a,f){this.create(a,f)},create:function(a,f){this._introspect();this.srcNodeRef=u.byId(f);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,B.mixin(this,a));this.postMixInProperties();this.id||(this.id=d.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=y.body(this.ownerDocument);d.add(this);this.buildRendering();var c;this.domNode&&(this._applyAttributes(),(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),c=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},f;for(f in this.params||{})a[f]=this._get(f);q.forEach(this.constructor._setterAttrs,
function(f){if(!(f in a)){var d=this._get(f);d&&this.set(f,d)}},this);for(f in a)this.set(f,a[f])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(q.map(a,function(a){return a+"Rtl"})));w.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,q.forEach(this.getChildren(),function(a){a._started||
a._destroyed||!B.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function f(f){f.destroyRecursive?f.destroyRecursive(a):f.destroy&&f.destroy(a)}this._beingDestroyed=!0;this.uninitialize();q.forEach(this._connects,B.hitch(this,"disconnect"));q.forEach(this._supportingWidgets,f);this.domNode&&q.forEach(d.findWidgets(this.domNode,this.containerNode),f);this.destroyRendering(a);
d.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?n.remove(this.domNode,"widgetId"):g.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||g.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){q.forEach(this.getChildren(),function(f){f.destroyRecursive&&f.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var f=this.domNode;B.isObject(a)?
C.set(f,a):f.style.cssText=f.style.cssText?f.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,f,d){d=3<=arguments.length?d:this.attributeMap[a];q.forEach(B.isArray(d)?d:[d],function(d){var c=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":B.isFunction(f)&&(f=B.hitch(this,f));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;c.tagName?n.set(c,d,f):c.set(d,f);break;case "innerText":c.innerHTML="";c.appendChild(this.ownerDocument.createTextNode(f));
break;case "textContent":c.textContent=f;break;case "innerHTML":c.innerHTML=f;break;case "class":w.replace(c,f,this[a]);break;case "toggleClass":w.toggle(c,d.className||a,f)}},this)},get:function(a){var f=this._getAttrNames(a);return this[f.g]?this[f.g]():this._get(a)},set:function(a,f){if("object"===typeof a){for(var d in a)this.set(d,a[d]);return this}d=this._getAttrNames(a);var c=this[d.s];if(B.isFunction(c))var h=c.apply(this,Array.prototype.slice.call(arguments,1));else{var c=this.focusNode&&
!B.isFunction(this.focusNode)?"focusNode":"domNode",b=this[c]&&this[c].tagName,l;if((l=b)&&!(l=r[b])){l=this[c];var g={},e;for(e in l)g[e.toLowerCase()]=!0;l=r[b]=g}e=l;d=a in this.attributeMap?this.attributeMap[a]:d.s in this?this[d.s]:e&&d.l in e&&"function"!=typeof f||/^aria-|^data-|^role$/.test(a)?c:null;null!=d&&this._attrToDom(a,f,d);this._set(a,f)}return h||this},_attrPairNames:{},_getAttrNames:function(a){var f=this._attrPairNames;if(f[a])return f[a];var d=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-
1).toUpperCase()});return f[a]={n:a+"Node",s:"_set"+d+"Attr",g:"_get"+d+"Attr",l:d.toLowerCase()}},_set:function(a,f){var d=this[a];this[a]=f;!this._created||d===f||d!==d&&f!==f||(this._watchCallbacks&&this._watchCallbacks(a,d,f),this.emit("attrmodified-"+a,{detail:{prevValue:d,newValue:f}}))},_get:function(a){return this[a]},emit:function(a,f,d){f=f||{};void 0===f.bubbles&&(f.bubbles=!0);void 0===f.cancelable&&(f.cancelable=!0);f.detail||(f.detail={});f.detail.widget=this;var c,h=this["on"+a];h&&
(c=h.apply(this,d?d:[f]));this._started&&!this._beingDestroyed&&D.emit(this.domNode,a.toLowerCase(),f);return c},on:function(a,f){var d=this._onMap(a);return d?k.after(this,d,f,!0):this.own(D(this.domNode,a,f))[0]},_onMap:function(a){var d=this.constructor,c=d._onMap;if(!c){var c=d._onMap={},h;for(h in d.prototype)/^on/.test(h)&&(c[h.replace(/^on/,"").toLowerCase()]=h)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},
getChildren:function(){return this.containerNode?d.findWidgets(this.containerNode):[]},getParent:function(){return d.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,d,c){return this.own(e.connect(a,d,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,d){return this.own(c.subscribe(a,B.hitch(this,d)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():t.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=C.get(this.domNode,"display")},placeAt:function(a,f){var c=!a.tagName&&d.byId(a);!c||!c.addChild||f&&"number"!==typeof f?(a=c&&"domNode"in c?c.containerNode&&!/after|before|replace/.test(f||"")?c.containerNode:c.domNode:u.byId(a,this.ownerDocument),g.place(this.domNode,a,f),!this._started&&(this.getParent()||{})._started&&this.startup()):c.addChild(this,f);return this},defer:function(a,d){var f=setTimeout(B.hitch(this,function(){f&&(f=null,this._destroyed||B.hitch(this,a)())}),d||0);return{remove:function(){f&&
(clearTimeout(f),f=null);return null}}}});v("dojo-bidi")&&m.extend(a);return m})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(p,q,k){return k("dijit.Destroyable",null,{destroy:function(k){this._destroyed=!0},own:function(){var k=["destroyRecursive","destroy","remove"];p.forEach(arguments,function(e){function b(){n.remove();p.forEach(w,function(b){b.remove()})}var m,n=q.before(this,"destroy",function(b){e[m](b)}),w=[];e.then?(m="cancel",e.then(b,
b)):p.forEach(k,function(g){"function"===typeof e[g]&&(m||(m=g),w.push(q.after(e,g,b,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(p,q,k,m,e,b){p=m("dijit._OnDijitClickMixin",null,{connect:function(e,k,m){return this.inherited(arguments,[e,"ondijitclick"==k?b:k,m])}});p.a11yclick=b;return p})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare",
"dojo/_base/lang"],function(p,q,k,m){m.extend(q,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return k("dijit._FocusMixin",null,{_focusManager:p})})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(p,q,k,m){k(function(){q("highcontrast")&&p.add(m.body(),"dijit_a11y")});return q})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),
function(p,q,k,m,e,b,u){e.add("highcontrast",function(){var b=u.doc.createElement("div");try{b.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(q.blankGif||p.toUrl("./resources/blank.gif"))+'");';u.body().appendChild(b);var k=m.getComputedStyle(b),g=k.backgroundImage;return k.borderTopColor==k.borderRightColor||g&&("none"==g||"url(invalid-url:)"==g)}catch(t){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+
t.toString()),!1}finally{8>=e("ie")?b.outerHTML="":u.body().removeChild(b)}});b(function(){e("highcontrast")&&k.add(u.body(),"dj_a11y")});return e})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),function(p,q,k,m,e,b,u){b.extend(p,{waiRole:"",waiState:""});return e("dijit._Templated",[q,k],{constructor:function(){u.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin",
"","2.0")},_processNode:function(b,e){var g=this.inherited(arguments),k=e(b,"waiRole");k&&b.setAttribute("role",k);(k=e(b,"waiState"))&&m.forEach(k.split(/\s*,\s*/),function(g){-1!=g.indexOf("-")&&(g=g.split("-"),b.setAttribute("aria-"+g[0],g[1]))});return g}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(p,q,k,m,e,b,u,n){var w=q("dijit._TemplatedMixin",n,{templateString:null,
templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(b){var g=this.declaredClass,e=this;return u.substitute(b,this,function(b,k){"!"==k.charAt(0)&&(b=m.getObject(k.substr(1),!1,e));if("undefined"==typeof b)throw Error(g+" template:"+k);return null==b?"":"!"==k.charAt(0)?b:this._escapeValue(""+b)},this)},_escapeValue:function(b){return b.replace(/["'<>&]/g,function(b){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[b]})},buildRendering:function(){if(!this._rendered){this.templateString||
(this.templateString=p(this.templatePath,{sanitize:!0}));var b=w.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),e;if(m.isString(b)){if(e=k.toDom(this._stringRepl(b),this.ownerDocument),1!=e.nodeType)throw Error("Invalid template: "+b);}else e=b.cloneNode(!0);this.domNode=e}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(b){var g=this.containerNode;if(b&&g)for(;b.hasChildNodes();)g.appendChild(b.firstChild)}});
w._templateCache={};w.getCachedTemplate=function(b,e,n){var g=w._templateCache,m=b,q=g[m];if(q){try{if(!q.ownerDocument||q.ownerDocument==(n||document))return q}catch(D){}k.destroy(q)}b=u.trim(b);if(e||b.match(/\$\{([^\}]+)\}/g))return g[m]=b;e=k.toDom(b,n);if(1!=e.nodeType)throw Error("Invalid template: "+b);return g[m]=e};b("ie")&&e(window,"unload",function(){var b=w._templateCache,e;for(e in b){var n=b[e];"object"==typeof n&&k.destroy(n);delete b[e]}});return w})},"dojo/cache":function(){define(["./_base/kernel",
"./text"],function(p){return p.cache})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(p,q,k,m,e,b,u,n,w){var g=e.delegate(n,{mouseenter:b.enter,mouseleave:b.leave,keypress:k._keypress}),t;k=m("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);
this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(b){for(var e=b;;)if(1==e.nodeType&&(this._processTemplateNode(e,function(b,e){return b.getAttribute(e)},this._attach)||this.searchContainerNode)&&e.firstChild)e=e.firstChild;else{if(e==b)break;for(;!e.nextSibling;)if(e=e.parentNode,e==b)return;e=e.nextSibling}},_processTemplateNode:function(b,g,k){var n=!0,m=this.attachScope||this,q=g(b,"dojoAttachPoint")||g(b,"data-dojo-attach-point");if(q)for(var h=q.split(/\s*,\s*/);q=
h.shift();)e.isArray(m[q])?m[q].push(b):m[q]=b,n="containerNode"!=q,this._attachPoints.push(q);if(g=g(b,"dojoAttachEvent")||g(b,"data-dojo-attach-event"))for(q=g.split(/\s*,\s*/),h=e.trim;g=q.shift();)if(g){var c=null;-1!=g.indexOf(":")?(c=g.split(":"),g=h(c[0]),c=h(c[1])):g=h(g);c||(c=g);this._attachEvents.push(k(b,g,e.hitch(m,c)))}return n},_attach:function(b,e,k){e=e.replace(/^on/,"").toLowerCase();e="dijitclick"==e?t||(t=p("./a11yclick")):g[e]||e;return u(b,e,k)},_detachTemplateNodes:function(){var b=
this.attachScope||this;q.forEach(this._attachPoints,function(e){delete b[e]});this._attachPoints=[];q.forEach(this._attachEvents,function(b){b.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});e.extend(w,{dojoAttachEvent:"",dojoAttachPoint:""});return k})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(p,q,k,m,e){return k("dijit._WidgetsInTemplateMixin",
null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);e.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(m.hitch(this,function(b){this._startupWidgets=b;for(var e=0;e<b.length;e++)this._processTemplateNode(b[e],
function(b,e){return b[e]},function(b,e,k){return e in b?b.connect(b,e,k):b.on(e,k,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(b,e,k){return e(b,"dojoType")||e(b,"data-dojo-type")?
!0:this.inherited(arguments)},startup:function(){p.forEach(this._startupWidgets,function(b){b&&!b._started&&b.startup&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(p,q,k,m,e,b,u,n,w,g,t,C,v,A,B,D){function F(a){return eval("("+a+")")}function h(a){var d=
a._nameCaseMap,b=a.prototype;if(!d||d._extendCnt<y){var d=a._nameCaseMap={},c;for(c in b)"_"!==c.charAt(0)&&(d[c.toLowerCase()]=c);d._extendCnt=y}return d}function c(a,d){d||(d=p);var c=d._dojoParserCtorMap||(d._dojoParserCtorMap={}),b=a.join();if(!c[b]){for(var h=[],f=0,e=a.length;f<e;f++){var g=a[f];h[h.length]=c[g]=c[g]||k.getObject(g)||~g.indexOf("/")&&d(g)}a=h.shift();c[b]=h.length?a.createSubclass?a.createSubclass(h):a.extend.apply(a,h):a}return c[b]}new Date("X");var y=0;w.after(k,"extend",
function(){y++},!0);var x={_clearCache:function(){y++;_ctorMap={}},_functionFromScript:function(a,d){var c="",b="",h=a.getAttribute(d+"args")||a.getAttribute("args");d=a.getAttribute("with");h=(h||"").split(/\s*,\s*/);d&&d.length&&m.forEach(d.split(/\s*,\s*/),function(a){c+="with("+a+"){";b+="}"});return new Function(h,c+a.innerHTML+b)},instantiate:function(a,d,c){d=d||{};c=c||{};var b=(c.scope||q._scopeName)+"Type",h="data-"+(c.scope||q._scopeName)+"-",f=h+"type",e=h+"mixins",g=[];m.forEach(a,function(a){var c=
b in d?d[b]:a.getAttribute(f)||a.getAttribute(b);if(c){var h=a.getAttribute(e),c=h?[c].concat(h.split(/\s*,\s*/)):[c];g.push({node:a,types:c})}});return this._instantiate(g,d,c)},_instantiate:function(a,d,b,h){function e(a){d._started||b.noStart||m.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}a=m.map(a,function(a){var f=a.ctor||c(a.types,b.contextRequire);if(!f)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(f,
a.node,d,b,a.scripts,a.inherited)},this);return h?g(a).then(e):e(a)},construct:function(a,c,b,e,l,f){function d(a){C&&k.setObject(C,a);for(p=0;p<I.length;p++)w[I[p].advice||"after"](a,I[p].method,k.hitch(a,I[p].func),!0);for(p=0;p<L.length;p++)L[p].call(a);for(p=0;p<K.length;p++)a.watch(K[p].prop,K[p].func);for(p=0;p<J.length;p++)B(a,J[p].event,J[p].func);return a}var g=a&&a.prototype;e=e||{};var r={};e.defaults&&k.mixin(r,e.defaults);f&&k.mixin(r,f);var x;v("dom-attributes-explicit")?x=c.attributes:
v("dom-attributes-specified-flag")?x=m.filter(c.attributes,function(a){return a.specified}):(f=(/^input$|^img$/i.test(c.nodeName)?c:c.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),x=m.map(f.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==c.nodeName&&"value"==a||"enctype"==b?c.getAttribute(b):c.getAttributeNode(b).value}}));var z=e.scope||q._scopeName;f="data-"+z+"-";var y={};"dojo"!==z&&(y[f+"props"]=
"data-dojo-props",y[f+"type"]="data-dojo-type",y[f+"mixins"]="data-dojo-mixins",y[z+"type"]="dojotype",y[f+"id"]="data-dojo-id");for(var p=0,u,z=[],C,H;u=x[p++];){var G=u.name,D=G.toLowerCase();u=u.value;switch(y[D]||D){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":H=u;break;case "data-dojo-id":case "jsid":C=u;break;case "data-dojo-attach-point":case "dojoattachpoint":r.dojoAttachPoint=u;break;case "data-dojo-attach-event":case "dojoattachevent":r.dojoAttachEvent=
u;break;case "class":r["class"]=c.className;break;case "style":r.style=c.style&&c.style.cssText;break;default:if(G in g||(G=h(a)[D]||G),G in g)switch(typeof g[G]){case "string":r[G]=u;break;case "number":r[G]=u.length?Number(u):NaN;break;case "boolean":r[G]="false"!=u.toLowerCase();break;case "function":""===u||-1!=u.search(/[^\w\.]+/i)?r[G]=new Function(u):r[G]=k.getObject(u,!1)||new Function(u);z.push(G);break;default:D=g[G],r[G]=D&&"length"in D?u?u.split(/\s*,\s*/):[]:D instanceof Date?""==u?new Date(""):
"now"==u?new Date:t.fromISOString(u):D instanceof n?q.baseUrl+u:F(u)}else r[G]=u}}for(x=0;x<z.length;x++)y=z[x].toLowerCase(),c.removeAttribute(y),c[y]=null;if(H)try{H=F.call(e.propsThis,"{"+H+"}"),k.mixin(r,H)}catch(M){throw Error(M.toString()+" in data-dojo-props\x3d'"+H+"'");}k.mixin(r,b);l||(l=a&&(a._noScript||g._noScript)?[]:A("\x3e script[type^\x3d'dojo/']",c));var I=[],L=[],K=[],J=[];if(l)for(p=0;p<l.length;p++)y=l[p],c.removeChild(y),b=y.getAttribute(f+"event")||y.getAttribute("event"),e=
y.getAttribute(f+"prop"),H=y.getAttribute(f+"method"),z=y.getAttribute(f+"advice"),x=y.getAttribute("type"),y=this._functionFromScript(y,f),b?"dojo/connect"==x?I.push({method:b,func:y}):"dojo/on"==x?J.push({event:b,func:y}):r[b]=y:"dojo/aspect"==x?I.push({method:H,advice:z,func:y}):"dojo/watch"==x?K.push({prop:e,func:y}):L.push(y);a=(l=a.markupFactory||g.markupFactory)?l(r,c,a):new a(r,c);return a.then?a.then(d):d(a)},scan:function(a,b){function d(a){if(!a.inherited){a.inherited={};var c=a.node,b=
d(a.parent),c={dir:c.getAttribute("dir")||b.dir,lang:c.getAttribute("lang")||b.lang,textDir:c.getAttribute(x)||b.textDir},f;for(f in c)c[f]&&(a.inherited[f]=c[f])}return a.inherited}var h=[],e=[],f={},g=(b.scope||q._scopeName)+"Type",k="data-"+(b.scope||q._scopeName)+"-",y=k+"type",x=k+"textdir",k=k+"mixins",n=a.firstChild,u=b.inherited;if(!u){var w=function(a,c){return a.getAttribute&&a.getAttribute(c)||a.parentNode&&w(a.parentNode,c)},u={dir:w(a,"dir"),lang:w(a,"lang"),textDir:w(a,x)},t;for(t in u)u[t]||
delete u[t]}t={inherited:u};for(var A,B;;)if(n)if(1!=n.nodeType)n=n.nextSibling;else if(A&&"script"==n.nodeName.toLowerCase())(u=n.getAttribute("type"))&&/^dojo\/\w/i.test(u)&&A.push(n),n=n.nextSibling;else if(B)n=n.nextSibling;else if(u=n.getAttribute(y)||n.getAttribute(g),a=n.firstChild,u||a&&(3!=a.nodeType||a.nextSibling)){B=null;if(u){var D=n.getAttribute(k);A=D?[u].concat(D.split(/\s*,\s*/)):[u];try{B=c(A,b.contextRequire)}catch(I){}B||m.forEach(A,function(a){~a.indexOf("/")&&!f[a]&&(f[a]=!0,
e[e.length]=a)});D=B&&!B.prototype._noScript?[]:null;t={types:A,ctor:B,parent:t,node:n,scripts:D};t.inherited=d(t);h.push(t)}else t={node:n,scripts:A,parent:t};A=D;B=n.stopParser||B&&B.prototype.stopParser&&!b.template;n=a}else n=n.nextSibling;else{if(!t||!t.node)break;n=t.node.nextSibling;B=!1;t=t.parent;A=t.scripts}var F=new C;e.length?(v("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+e.join(", ")),(b.contextRequire||p)(e,function(){F.resolve(m.filter(h,function(a){if(!a.ctor)try{a.ctor=
c(a.types,b.contextRequire)}catch(J){}for(var f=a.parent;f&&!f.types;)f=f.parent;var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!b.template);a.instantiate=!f||f.instantiate&&f.instantiateChildren;return a.instantiate}))})):F.resolve(h);return F.promise},_require:function(a,c){a=F("{"+a.innerHTML+"}");var b=[],d=[],h=new C;c=c&&c.contextRequire||p;for(var f in a)b.push(f),d.push(a[f]);c(d,function(){for(var a=0;a<b.length;a++)k.setObject(b[a],arguments[a]);h.resolve(arguments)});
return h.promise},_scanAmd:function(a,c){var b=new C,d=b.promise;b.resolve(!0);var h=this;A("script[type\x3d'dojo/require']",a).forEach(function(a){d=d.then(function(){return h._require(a,c)});a.parentNode.removeChild(a)});return d},parse:function(a,c){!a||"string"==typeof a||"nodeType"in a||(c=a,a=c.rootNode);var d=a?b.byId(a):u.body();c=c||{};var h=c.template?{template:!0}:{},e=[],f=this;a=this._scanAmd(d,c).then(function(){return f.scan(d,c)}).then(function(a){return f._instantiate(a,h,c,!0)}).then(function(a){return e=
e.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});k.mixin(e,a);return e}};q.parser=x;e.parseOnLoad&&D(100,x,"parse");return x})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(p,q){var k={};p.setObject("dojo.date.stamp",k);k.fromISOString=function(m,e){k._isoRegExp||(k._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var b=k._isoRegExp.exec(m);m=null;
if(b){b.shift();b[1]&&b[1]--;b[6]&&(b[6]*=1E3);e&&(e=new Date(e),q.forEach(q.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(b){return e["get"+b]()}),function(e,g){b[g]=b[g]||e}));m=new Date(b[0]||1970,b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0);100>b[0]&&m.setFullYear(b[0]||1970);var p=0,n=b[7]&&b[7].charAt(0);"Z"!=n&&(p=60*(b[8]||0)+(Number(b[9])||0),"-"!=n&&(p*=-1));n&&(p-=m.getTimezoneOffset());p&&m.setTime(m.getTime()+6E4*p)}return m};k.toISOString=function(k,
e){var b=function(b){return 10>b?"0"+b:b};e=e||{};var p=[],n=e.zulu?"getUTC":"get",m="";"time"!=e.selector&&(m=k[n+"FullYear"](),m=["0000".substr((m+"").length)+m,b(k[n+"Month"]()+1),b(k[n+"Date"]())].join("-"));p.push(m);"date"!=e.selector&&(m=[b(k[n+"Hours"]()),b(k[n+"Minutes"]()),b(k[n+"Seconds"]())].join(":"),n=k[n+"Milliseconds"](),e.milliseconds&&(m+="."+(100>n?"0":"")+b(n)),e.zulu?m+="Z":"time"!=e.selector&&(k=k.getTimezoneOffset(),e=Math.abs(k),m+=(0<k?"-":"+")+b(Math.floor(e/60))+":"+b(e%
60)),p.push(m));return p.join("T")};return k})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(p,q,k,m,e,b){return p([b,e],{_onMap:function(b){var e=this.constructor._onMap,k;e&&e.FINAL||(delete this.constructor._onMap,e=this.registerConnectEvents(),e.FINAL=!0);b=b.toLowerCase();e[b]?k=this[e[b].method]:(b=this._onCamelCase(b),this[b]&&(k=b));return k},on:function(b,e){var k=this._onMap(b),g=b.replace(/\-/g,
""),n="on"+g in this.domNode;return k||!n?this.inherited(arguments):this.own(m(this.domNode,g,e))[0]},emit:function(b,e,k){var g,n,m,p=b.toLowerCase(),u=this.constructor._onMap||this.registerConnectEvents();n=this[this._onMap(p)];e=e||{};e.target||(e.target=this);n&&u&&u[p]&&(this._onObj2Arr(function(){g=Array.prototype.slice.call(arguments)},u[p].argKeys)(e),m=q.mixin({},arguments),m[2]=g,m[0]=u[p].name.replace(/^on/,""));return this.inherited(m||arguments)}})})},"esri/layers/WMSLayerInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo/has","../kernel"],function(p,q,k,m,e){p=p(null,{declaredClass:"esri.layers.WMSLayerInfo",name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],allExtents:[],spatialReferences:[],queryable:!1,showPopup:!1,constructor:function(b){b&&(this.name=b.name,this.title=b.title,this.description=b.description,this.extent=b.extent,this.legendURL=b.legendURL,this.subLayers=b.subLayers?b.subLayers:[],this.allExtents=b.allExtents?b.allExtents:[],
this.spatialReferences=b.spatialReferences?b.spatialReferences:[],this.queryable=!!b.queryable,this.showPopup=!!b.showPopup)},clone:function(){var b={name:this.name,title:this.title,description:this.description,legendURL:this.legendURL},e;this.extent&&(b.extent=this.extent.getExtent());b.subLayers=[];k.forEach(this.subLayers,function(e){b.subLayers.push(e.clone())});b.allExtents=[];for(e in this.allExtents)e=parseInt(e,10),isNaN(e)||(b.allExtents[e]=this.allExtents[e].getExtent());b.spatialReferences=
[];k.forEach(this.spatialReferences,function(e){b.spatialReferences.push(e)});b.queryable=this.queryable;b.showPopup=this.showPopup;return b}});m("extend-esri")&&q.setObject("layers.WMSLayerInfo",p,e);return p})},"*noref":1}});
define("esri/layers/WMSLayer","require dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/sniff ../config ../graphic ../kernel ../request ../urlUtils ../dijit/PopupTemplate ../SpatialReference ../geometry/Extent ../geometry/Point ./DynamicMapServiceLayer ./WMSLayerInfo dojo/query".split(" "),function(p,q,k,m,e,b,u,n,w,g,t,C,v,A,B,D,F){k=k([D],{declaredClass:"esri.layers.WMSLayer",_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,
2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,
27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],version:null,constructor:function(b,c){var h=t.urlToObject(b);h.query&&(h.query.version||h.query.Version||h.query.VERSION)&&(this.version=h.query.version||h.query.Version||h.query.VERSION);this.url=b=this._stripParameters(b,"version service request bbox format height width layers srs crs styles transparent bgcolor exceptions time elevation sld wfs".split(" "));
this._url=t.urlToObject(b);this._getCapabilitiesURL=b;this._initLayer=m.hitch(this,this._initLayer);this._parseCapabilities=m.hitch(this,this._parseCapabilities);this._getCapabilitiesError=m.hitch(this,this._getCapabilitiesError);c?(this.customParameters=c.customParameters,this.customLayerParameters=c.customLayerParameters,this.imageFormat=this._getImageFormat(c.format),this.imageTransparency=!1!==c.transparent,this.visibleLayers=c.visibleLayers?c.visibleLayers:[],this.version=c.version||this.version,
c.resourceInfo?this._readResourceInfo(c.resourceInfo):this._getCapabilities()):(this.imageFormat="image/png",this.imageTransparency=!0,this.visibleLayers=[],this._getCapabilities());this._blankImageURL=p.toUrl("../images/pixel.png");this.extentProcessor=this._createExtentProcessor(0);this._createChildLayer()},setVisibleLayers:function(b){this.visibleLayers=(b=this._checkVisibleLayersList(b))?b:[];this.refresh(!0)},setImageFormat:function(b){this.imageFormat=this._getImageFormat(b);this.refresh(!0)},
setImageTransparency:function(b){this.imageTransparency=b;this.refresh(!0)},setCustomParameters:function(b,c){this.customParameters=b;this.customLayerParameters=c;this.refresh(!0)},refresh:function(){this.inherited(arguments);this._childLayer&&this._childLayer.refresh.apply(this._childLayer,arguments)},getImageUrl:function(b,c,e,g){if(this.visibleLayers&&0!==this.visibleLayers.length){b=this._getImageParams(b,c,e);b=this._mixinCustomLayerParameters(b);c=this.getMapURL;var a;c+=-1===c.indexOf("?")?
"?":"";for(a in b)b.hasOwnProperty(a)&&(c+="?"===c.substring(c.length-1,c.length)?"":"\x26",c+=a+"\x3d"+b[a]);g(t.addProxy(c))}else g(this._blankImageURL)},_setMap:function(b,c,e){var h=this.inherited(arguments);b.wrapAround180?this._childLayer&&(this.suspended&&this._childLayer.suspend(),this._childLayer._setMap(b,h)):this._childLayer=this.extentProcessor=null;return h},_unsetMap:function(b,c){this._childLayer&&this._childLayer._unsetMap(b,this._div);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);
this._childLayer&&this._childLayer.suspend()},onResume:function(){this.inherited(arguments);this._childLayer&&this._childLayer.resume()},_createChildLayer:function(){this._childLayer=new D(null,{extentProcessor:this._createExtentProcessor(1)});this._childLayer._isChildLayer=!0;this._childLayer.getImageUrl=m.hitch(this,this.getImageUrl);this._childLayer.loaded=!0},_createExtentProcessor:function(b){return m.hitch(this,this._extentProcessor,b)},_extentProcessor:function(b,c){var h=c.extent,e=c.width,
a=0;if(h){c=h.getWidth()/e;var d=h.bisect(),h=d.extents,g=h[b];g&&(e=d.marginLeft/c,a=0===b?e:e+h[0].getWidth()/c,e=Math.ceil(g.getWidth()/c),a=Math.ceil(a));h=g}return{extent:h,width:e,marginLeft:a}},_getImageParams:function(b,c,g){var h=b.spatialReference.wkid;-1===e.indexOf(this.spatialReferences,h)&&b.spatialReference.latestWkid&&(h=b.spatialReference.latestWkid);if(e.some(this._WEB_MERCATOR,function(a){return a==h})){var a=e.filter(this.spatialReferences,function(a){return e.some(this._WEB_MERCATOR,
function(b){return b==a})},this);0===a.length&&(a=e.filter(this.spatialReferences,function(a){return e.some(this._WORLD_MERCATOR,function(b){return b==a})},this));h=0<a.length?a[0]:this._WEB_MERCATOR[1]}this.spatialReferences=e.filter(this.spatialReferences,function(a){return a!==h});this.spatialReferences.unshift(h);var a=b.xmin,d=b.xmax,k=b.ymin;b=b.ymax;var r={SERVICE:"WMS",REQUEST:"GetMap"};r.FORMAT=this.imageFormat;r.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";r.STYLES="";r.VERSION=this.version;
r.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;r.WIDTH=c;r.HEIGHT=g;this.maxWidth<c&&(r.WIDTH=this.maxWidth);this.maxHeight<g&&(r.HEIGHT=this.maxHeight);c=h?h:NaN;isNaN(c)||("1.3.0"==this.version?r.CRS="EPSG:"+c:r.SRS="EPSG:"+c);"1.3.0"==this.version&&this._useLatLong(c)?r.BBOX=k+","+a+","+b+","+d:r.BBOX=a+","+k+","+d+","+b;return r},_initLayer:function(h,c){this.spatialReference=new v(this.extent.spatialReference);this.initialExtent=new A(this.extent);this.fullExtent=new A(this.extent);
this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);var e=m.hitch(this,function(){this.loaded=!0;this.onLoad(this);var b=this._loadCallback;b&&(delete this._loadCallback,b(this))});b("chrome")?(h=u.defaults.io,c="with-credentials"===h.useCors?t.canUseXhr(this.getMapURL,!0):-1,(h=-1<c?h.corsEnabledServers[c]:null)&&h.withCredentials?g({url:this.getMapURL,handleAs:"text",content:{SERVICE:"WMS",REQUEST:"GetMap"}}).addBoth(function(){e()}):e()):e()},_readResourceInfo:function(b){b.extent?
b.layerInfos?(this.extent=b.extent,this.allExtents[0]=b.extent,this.layerInfos=b.layerInfos,this.description=b.description?b.description:"",this.copyright=b.copyright?b.copyright:"",this.title=b.title?b.title:"",this.getMapURL=b.getMapURL?b.getMapURL:this._getCapabilitiesURL,this.getFeatureInfoURL=b.getFeatureInfoURL,this.featureInfoFormat=b.featureInfoFormat,this.version=b.version?b.version:"1.3.0",this.maxWidth=b.maxWidth?b.maxWidth:5E3,this.maxHeight=b.maxHeight?b.maxHeight:5E3,this.spatialReferences=
b.spatialReferences?b.spatialReferences:[],this.imageFormat=this._getImageFormat(b.format),this.setScaleRange(b.minScale,b.maxScale),this.customLayerParameters=b.customLayerParameters||this.customLayerParameters,this.customParameters=b.customParameters||this.customParameters,this._initLayer()):this._errorHandler(Error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo")):this._errorHandler(Error("esri.layers.WMSLayer: Unable to find the 'extent' property in resourceInfo."))},
_getCapabilities:function(){var b=this._url.query?this._url.query:{};b.SERVICE="WMS";b.REQUEST="GetCapabilities";this.version&&(b.VERSION=this.version);var b=this._mixinCustomParameters(b),c=this._url.path+"?",e;for(e in b)b.hasOwnProperty(e)&&(c+="?"==c.substring(c.length-1,c.length)?"":"\x26",c+=e+"\x3d"+b[e]);g({url:c,handleAs:"xml",headers:{"Content-Type":null},load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:!1})},_parseCapabilities:function(b){if(b){var c=this;this.version=
this._getAttributeValue("WMS_Capabilities","version",b,null);this.version||(this.version=this._getAttributeValue("WMT_MS_Capabilities","version",b,"1.3.0"));var h=this._getTag("Service",b);this.title=this._getTagValue("Title",h,"");this.title||(this.title=this._getTagValue("Name",h,""));this.copyright=this._getTagValue("AccessConstraints",h,"");this.description=this._getTagValue("Abstract",h,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",h,5E3),10);this.maxHeight=parseInt(this._getTagValue("MaxHeight",
h,5E3),10);if(h=this._getTag("Layer",b)){var g=this._getLayerInfo(h),a=0,d=null,h=this._getTag("Capability",b);e.forEach(h.childNodes,function(b){"Layer"==b.nodeName&&(0===a?d=b:(1===a&&g.name&&(g.name="",g.subLayers=[],g.subLayers.push(this._getLayerInfo(d))),g.subLayers.push(this._getLayerInfo(b))),a++)},this);if(g&&(this.layerInfos=g.subLayers,this.layerInfos&&0!==this.layerInfos.length||(this.layerInfos=[g]),this.extent=g.extent,this.extent||(g.extent=new A(this.layerInfos[0].extent.toJson()),
this.extent=g.extent),this.allExtents=g.allExtents,this.allExtents&&this.allExtents.length||(g.allExtents=[],e.forEach(this.layerInfos[0].allExtents,function(a,b){a&&(g.allExtents[b]=new A(a.toJson()))}),this.allExtents=g.allExtents),this.spatialReferences=g.spatialReferences,!this.spatialReferences.length&&0<this.layerInfos.length))for(var k=function(a){var b;for(b=0;b<a.subLayers.length;b++){var c=a.subLayers[b],d=c.spatialReferences;!d.length&&c.subLayers&&0<c.subLayers.length&&(d=k(c));if(d.length)return d}return[]},
h=0;h<this.layerInfos.length;h++){var r=this.layerInfos[h];this.spatialReferences=this.layerInfos[0].spatialReferences;!this.spatialReferences.length&&r.subLayers&&0<r.subLayers.length&&(this.spatialReferences=k(r));if(this.spatialReferences.length)break}h=function(a){return(a=q.query("DCPType",c._getTag(a,b)))&&0<a.length&&(a=q.query("HTTP",a[0]))&&0<a.length&&(a=q.query("Get",a[0]))&&0<a.length&&(a=c._getAttributeValue("OnlineResource","xlink:href",a[0],null))?(a.indexOf("\x26")===a.length-1&&(a=
a.substring(0,a.length-1)),c._stripParameters(a,["service","request"])):null};r=function(a){var d=[];0===q.query("Operation",b).length?e.forEach(q.query("Format",c._getTag(a,b)),function(a){d.push(a.text?a.text:a.textContent)}):e.forEach(q.query("Operation",b),function(b){b.getAttribute("name")===a&&e.forEach(q.query("Format",b),function(a){d.push(a.text?a.text:a.textContent)})});return d};this.getMapURL=h("GetMap")||this._getCapabilitiesURL;this.getMapFormats=r("GetMap");e.some(this.getMapFormats,
function(a){return-1<a.indexOf(this.imageFormat)},this)||(this.imageFormat=this.getMapFormats[0]);if(this.getFeatureInfoURL=h("GetFeatureInfo"))this.getFeatureInfoFormats=r("GetFeatureInfo"),-1<e.indexOf(this.getFeatureInfoFormats,"text/html")?this.featureInfoFormat="text/html":-1<e.indexOf(this.getFeatureInfoFormats,"text/plain")&&(this.featureInfoFormat="text/plain");if(!this.featureInfoFormat){var l=function(a){if(a&&(a.queryable=!1,a.subLayers))for(var b=0;b<a.subLayers.length;b++)l(a.subLayers[b])};
l(g)}this._initLayer()}else this._errorHandler(Error("esri.layers.WMSLayer: Response does not contain any layers."))}else this._errorHandler(Error("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)"))},_getCapabilitiesError:function(b){b&&b.message&&(b.message="GetCapabilities request for "+this._getCapabilitiesURL+" failed. ("+b.message+")");this._errorHandler(b)},_getLayerInfo:function(b){if(!b)return null;var c=new F;c.name="";c.title="";c.description="";c.allExtents=
[];c.spatialReferences=[];c.queryable="1"===b.getAttribute("queryable");c.subLayers=[];var h=this._getTag("LatLonBoundingBox",b);h&&(c.allExtents[0]=this._getExtent(h,4326));var g=this._getTag("EX_GeographicBoundingBox",b),a;g&&(a=new A(0,0,0,0,new v({wkid:4326})),a.xmin=parseFloat(this._getTagValue("westBoundLongitude",g,0)),a.ymin=parseFloat(this._getTagValue("southBoundLatitude",g,0)),a.xmax=parseFloat(this._getTagValue("eastBoundLongitude",g,0)),a.ymax=parseFloat(this._getTagValue("northBoundLatitude",
g,0)),c.allExtents[0]=a);h||g||(a=new A(-180,-90,180,90,new v({wkid:4326})),c.allExtents[0]=a);c.extent=c.allExtents[0];var d=-1<e.indexOf(["1.0.0","1.1.0","1.1.1"],this.version)?"SRS":"CRS";e.forEach(b.childNodes,function(a){if("Name"==a.nodeName)c.name=(a.text?a.text:a.textContent)||"";else if("Title"==a.nodeName)c.title=(a.text?a.text:a.textContent)||"";else if("Abstract"==a.nodeName)c.description=(a.text?a.text:a.textContent)||"";else if("BoundingBox"==a.nodeName){var b=a.getAttribute(d);b&&0===
b.indexOf("EPSG:")?(b=parseInt(b.substring(5),10),0===b||isNaN(b)||(a="1.3.0"==this.version?this._getExtent(a,b,this._useLatLong(b)):this._getExtent(a,b),c.allExtents[b]=a,c.extent||(c.extent=a))):b&&0===b.indexOf("CRS:")?(b=parseInt(b.substring(4),10),0===b||isNaN(b)||(this._CRS_TO_EPSG[b]&&(b=this._CRS_TO_EPSG[b]),c.allExtents[b]=this._getExtent(a,b))):(b=parseInt(b,10),0===b||isNaN(b)||(c.allExtents[b]=this._getExtent(a,b)))}else if(a.nodeName==d)a=(a.text?a.text:a.textContent).split(" "),e.forEach(a,
function(a){a=-1<a.indexOf(":")?parseInt(a.split(":")[1],10):parseInt(a,10);0===a||isNaN(a)||(this._CRS_TO_EPSG[a]&&(a=this._CRS_TO_EPSG[a]),-1==e.indexOf(c.spatialReferences,a)&&c.spatialReferences.push(a))},this);else if("Style"!=a.nodeName||c.legendURL)"Layer"===a.nodeName&&c.subLayers.push(this._getLayerInfo(a));else if(a=this._getTag("LegendURL",a))if(a=this._getTag("OnlineResource",a))c.legendURL=a.getAttribute("xlink:href")},this);c.title=c.title||c.name;return c},_getImageFormat:function(b){switch(b?
b.toLowerCase():""){case "jpg":return"image/jpeg";case "bmp":return"image/bmp";case "gif":return"image/gif";case "svg":return"image/svg+xml";default:return"image/png"}},getImageFormat:function(){switch(this.imageFormat?this.imageFormat.toLowerCase():""){case "image/jpeg":return"jpg";case "image/bmp":return"bmp";case "image/gif":return"gif";case "image/svg+xml":return"svg";default:return"png"}},_getExtent:function(b,c,e){var h;if(b){h=new A;var a=parseFloat(b.getAttribute("minx")),d=parseFloat(b.getAttribute("miny")),
g=parseFloat(b.getAttribute("maxx"));b=parseFloat(b.getAttribute("maxy"));e?(h.xmin=isNaN(d)?-1*Number.MAX_VALUE:d,h.ymin=isNaN(a)?-1*Number.MAX_VALUE:a,h.xmax=isNaN(b)?Number.MAX_VALUE:b,h.ymax=isNaN(g)?Number.MAX_VALUE:g):(h.xmin=isNaN(a)?-1*Number.MAX_VALUE:a,h.ymin=isNaN(d)?-1*Number.MAX_VALUE:d,h.xmax=isNaN(g)?Number.MAX_VALUE:g,h.ymax=isNaN(b)?Number.MAX_VALUE:b);h.spatialReference=new v({wkid:c})}return h},_useLatLong:function(b){var c,e;for(e=0;e<this._REVERSED_LAT_LONG_RANGES.length;e++){var h=
this._REVERSED_LAT_LONG_RANGES[e];if(b>=h[0]&&b<=h[1]){c=!0;break}}return c},_getTag:function(b,c){return(b=q.query(b,c))&&0<b.length?b[0]:null},_getTagValue:function(b,c,e){return(b=q.query(b,c))&&0<b.length?b[0].text?b[0].text:b[0].textContent:e},_getAttributeValue:function(b,c,e,g){return(b=q.query(b,e))&&0<b.length?b[0].getAttribute(c):g},_checkVisibleLayersList:function(b){if(b&&0<b.length&&this.layerInfos&&0<this.layerInfos.length&&"number"==typeof b[0]){var c=[];e.forEach(b,function(b){b<this.layerInfos.length&&
c.push(this.layerInfos[b].name)},this);b=c}return b},_stripParameters:function(b,c){b=t.urlToObject(b);var g,h=[];for(g in b.query)b.query.hasOwnProperty(g)&&-1===e.indexOf(c,g.toLowerCase())&&h.push(g+"\x3d"+b.query[g]);return b.path+(h.length?"?"+h.join("\x26"):"")},_getPopupGraphic:function(b,c){var g=this.visibleLayers;if(!g||0===g.length)return null;var h=this._popupGraphic;h||(h=new C({title:this.title||"",description:'\x3cdiv style\x3d"position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;"\x3e\x3ciframe src\x3d"{QUERY_URL}" width\x3d"250" height\x3d"147" frameborder\x3d"0" marginwidth\x3d"0" marginheight\x3d"0" style\x3d"position:absolute;top:0;left:0;width:100%;height:100%;border:0;background:url(\''+
p.toUrl("../dijit/images/loading-throb.gif")+"') transparent center no-repeat;\" onload\x3d\"(event.target || event.srcElement).style.background \x3d 'none';\"\x3e\x3c/iframe\x3e\x3c/div\x3e"}),h=this._popupGraphic=new n(null,null,{},h),h._layer=this);var a=function(b){var c=[];if(b&&(b.queryable&&b.showPopup&&b.name&&c.push(b.name),b.subLayers))for(var d=0;d<b.subLayers.length;d++){var e=a(b.subLayers[d]);e.length&&(c=c.concat(e))}return c},d=a({subLayers:this.layerInfos}),d=e.filter(d,function(a){return-1<
e.indexOf(g,a)});if(d.length){var k=this.getFeatureInfoURL;b=this._getImageParams(b.extent,b.width,b.height);b=this._mixinCustomLayerParameters(b);b.REQUEST="GetFeatureInfo";b.INFO_FORMAT=this.featureInfoFormat;b.QUERY_LAYERS=d.join();b.FEATURE_COUNT=25;"1.3.0"===this.version?(b.I=Math.round(c.x),b.J=Math.round(c.y)):(b.X=Math.round(c.x),b.Y=Math.round(c.y));var k=k+(-1===k.indexOf("?")?"?":""),m;for(m in b)b.hasOwnProperty(m)&&(k+="?"===k.substring(k.length-1,k.length)?"":"\x26",k+=m+"\x3d"+b[m]);
h.attributes.QUERY_URL=k;return h}return null},_mixinCustomParameters:function(b){if(this.customParameters)for(var c in this.customParameters)b[c]=encodeURIComponent(this.customParameters[c]);return b},_mixinCustomLayerParameters:function(b){if(this.customLayerParameters||this.customParameters){var c=m.clone(this.customParameters||{});m.mixin(c,this.customLayerParameters||{});for(var e in c)"styles"===e.toLowerCase()&&delete b.STYLES,b[e]=encodeURIComponent(c[e])}return b}});b("extend-esri")&&m.setObject("layers.WMSLayer",
k,w);return k});